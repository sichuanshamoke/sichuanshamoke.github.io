<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="计算机网络," />





  <link rel="alternate" href="/atom.xml" title="Hello World" type="application/atom+xml" />






<meta name="description" content="计算机网络第四章-网络层 计算机学科基础：计算机网络第四章网络层的学习笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络第四章-网络层">
<meta property="og:url" content="http://example.com/2024/08/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%B1%82/index.html">
<meta property="og:site_name" content="Hello World">
<meta property="og:description" content="计算机网络第四章-网络层 计算机学科基础：计算机网络第四章网络层的学习笔记">
<meta property="og:locale">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/05/pPkv8ht.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/05/pPkzGy8.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/06/pPAgJ0g.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/06/pPAtTvn.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/05/pPApPv6.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/06/pPAtOET.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/05/pPAAI1J.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/06/pPAftK0.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/06/pPAUGex.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/06/pPAs3dA.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/06/pPAsWyF.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/06/pPAJ7Gj.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/06/pPARLlt.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/06/pPAfWVO.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/06/pPAhCMq.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/06/pPAhAdU.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/06/pPAhzTO.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/06/pPAtVcn.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/07/pPEZyrj.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/07/pPEeMes.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/07/pPEmE7R.png">
<meta property="og:image" content="https://s21.ax1x.com/2024/08/12/pApeFcF.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/06/pPAz7qS.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/06/pPEpUpR.png">
<meta property="og:image" content="https://s21.ax1x.com/2024/08/12/pApeEnJ.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/07/pPECJzR.png">
<meta property="og:image" content="https://s21.ax1x.com/2024/08/12/pApeZ7R.png">
<meta property="article:published_time" content="2024-08-11T15:43:04.000Z">
<meta property="article:modified_time" content="2024-08-11T16:48:17.549Z">
<meta property="article:author" content="Shamoke">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s1.ax1x.com/2023/08/05/pPkv8ht.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":true,"scrollpercent":true,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://example.com/2024/08/11/计算机网络第四章-网络层/"/>





  <title>计算机网络第四章-网络层 | Hello World</title>
  








<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
  

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <a target="_blank" rel="noopener" href="https://github.com/sichuanshamoke" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hello World</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Studying and Recording</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />
            
            日程表
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>
    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/08/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="沙漠客">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">计算机网络第四章-网络层</h1>
        

        <div class="post-meta">
          
          
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-08-11T23:43:04+08:00">
                2024-08-11
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2024-08-12T00:48:17+08:00">
                2024-08-12
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index">
                    <span itemprop="name">计算机基础学习笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2024/08/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%B1%82/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2024/08/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%B1%82/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  33k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2:01
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="计算机网络第四章-网络层"><a href="#计算机网络第四章-网络层" class="headerlink" title="计算机网络第四章-网络层"></a>计算机网络第四章-网络层</h2><blockquote>
<p>计算机学科基础：计算机网络第四章网络层的学习笔记</p>
</blockquote>
<span id="more"></span>
<h3 id="一-网络层的功能（✠）"><a href="#一-网络层的功能（✠）" class="headerlink" title="一.网络层的功能（✠）"></a>一.网络层的功能（✠）</h3><h4 id="1-异构网络互联"><a href="#1-异构网络互联" class="headerlink" title="1.异构网络互联"></a>1.异构网络互联</h4><ul>
<li>定义<ul>
<li>网络互连是指将两个以上的计算机网络，通过一定的方法，用一些中间设备（又称中继系统）相互连接起来，<br>以构成更大的网络系统。</li>
<li>网络互连通常是指用路由器进行网络互连和路由选择</li>
<li>互联网在网络层向上只提供简单灵活的、无连接的、尽最大努力交付的数据报服务</li>
</ul>
</li>
<li>中继系统的分类<ul>
<li>物理层中继系统：转发器，集线器。</li>
<li>数据链路层中继系统：网桥或交换机。</li>
<li>网络层中继系统：路由器。</li>
<li>网络层以上的中继系统：网关</li>
</ul>
</li>
<li>TCP/IP体系在网络互连上采用的做法是在网络层采用标准化协议，但相互连接的网络可以是异构的<br>异构是指物理层与数据链路层均不同</li>
</ul>
<h4 id="2-路由与转发"><a href="#2-路由与转发" class="headerlink" title="2.路由与转发"></a>2.路由与转发</h4><ul>
<li>路由选择（确定哪一条路径）<ul>
<li>按照复杂的分布式算法，根据从各相邻路由器所得到的关于整个网络拓扑的变化情况，动态地改变所选择的路由</li>
<li>根据特定的路由选择协议构造出路由表，同时经常或定期地和相邻路由器交换路由信息而不断地更新和维护路由表</li>
</ul>
</li>
<li>分组转发（当一个分组到达时所采取的动作）<ul>
<li>路由器根据转发表将用户的IP数据报从合适的端口转发出去。</li>
<li>路由表是根据路由选择算法得出的，而转发表是从路由表得出的。<br>在讨论路由选择的原理时，往往不去区分转发表和路由表，而是笼统地使用路由表一词。</li>
</ul>
</li>
</ul>
<h4 id="3-SDN的基本概念"><a href="#3-SDN的基本概念" class="headerlink" title="3.SDN的基本概念"></a>3.SDN的基本概念</h4><ul>
<li>软件定义网络采用集中式的控制平面和分布式的数据平面，两个平面相互分离，|<br>控制平面利用控制-数据接口对数据平面上的路由器进行集中式控制，方便软件来控制网络</li>
<li>通过Openflow协议（也可以通过其他途径）将转发表（在SDN中称为流表）下发给路由器。<br>路由器的工作很单纯，即收到分组、查找转发表、转发分组。</li>
<li>SDN提供的编程接口称为北向接口，北向接口提供了一系列丰富的API，<br>开发者可以在此基础上设计自己的应用，而不必关心底层的硬件细节。</li>
<li>SDN控制器和转发设备建立双向会话的接口称为南向接口，通过不同的南向接口协议(如Openflow)，<br>SDN控制器就可兼容不同的硬件设备，同时可以在设备中实现上层应用的逻辑。</li>
<li>SDN控制器集群内部控制器之间的通信接口称为东西向接口，用于增强整个控制平面的可靠性和可拓展性</li>
<li>SDN的优点：<ul>
<li>全局集中式控制和分布式高速转发，既利于控制平面的全局优化，又利于高性能的网络转发</li>
<li>灵活可编程与性能的平衡，控制和转发功能分离后，使得网络可以由专有的自动化工具以编程方式配置</li>
<li>降低成本，控制和数据平面分离后，尤其是在使用开放的接口协议后，就实现了网络设备的制造与功能软件的开发相分离，从而有效降低了成本。</li>
</ul>
</li>
<li>SDN的问题<ul>
<li>安全风险，集中管理容易受攻击，如果崩溃，整个网络会受到影响。</li>
<li>瓶颈问题，原本分布式的控制平面集中化后，随着网络规模扩大，控制器可能成为网络性能的瓶颈。</li>
</ul>
</li>
</ul>
<h4 id="4-拥塞控制"><a href="#4-拥塞控制" class="headerlink" title="4.拥塞控制"></a>4.拥塞控制</h4><ul>
<li>在通信子网中，因出现过量的分组而引起网络性能下降的现象称为拥塞。此时通信子网的负载增加<br>导致吞吐量降低</li>
<li>流量控制和拥塞控制的区别<ul>
<li>流量控制往往是指在发送端和接收端之间的点对点通信量的控制。<br>流量控制所要做的是抑制发送端发送数据的速率，以便使接收端来得及接收。</li>
<li>拥塞控制必须确保通信子网能够传送待传送的数据，是一个全局性的问题，<br>涉及网络中所有的主机、路由器及导致网络传输能力下降的所有因素。</li>
</ul>
</li>
<li>拥塞控制的方法<ul>
<li>开环控制<ul>
<li>在设计网络时事先将有关发生拥塞的因素考虑周到，力求网络在工作时不产生拥塞。这是一种静态的预防方法，<br>一旦整个系统启动并运行，中途就不再需要修改。</li>
<li>开环控制手段包括确定何时可接收新流量、何时可丢弃分组及丢弃哪些分组，确定何种调度策略等。<br>所有这些手段的共性是，在做决定时不考虑当前网络的状态。</li>
</ul>
</li>
<li>闭环控制<ul>
<li>事先不考虑有关发生拥塞的各种因素，采用监测网络系统去监视，及时检测哪里发生了拥塞，<br>然后将拥塞信息传到合适的地方，以便调整网络系统的运行，并解决出现的问题。</li>
<li>闭环控制是基于反馈环路的概念，是一种动态的方法。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="二-路由算法"><a href="#二-路由算法" class="headerlink" title="二.路由算法"></a>二.路由算法</h3><h4 id="1-静态路由与动态路由"><a href="#1-静态路由与动态路由" class="headerlink" title="1.静态路由与动态路由"></a>1.静态路由与动态路由</h4><ul>
<li>静态路由算法（又称非自适应路由算法）<ul>
<li>由网络管理员手工配置的路由信息。当网络的拓扑结构或链路的状态发生变化时，<br>网络管理员需要手工去修改路由表中相关的静态路由信息。</li>
<li>它不能及时适应网络状态的变化，对于简单的小型网络，可以采用静态路由。</li>
</ul>
</li>
<li>动态路由算法（又称自适应路由算法）<ul>
<li>路由器上的路由表项是通过相互连接的路由器之间彼此交换信息，然后按照一定的算法优化出来的，<br>而这些路由信息会在一定时间间隙里不断更新，以适应不断变化的网络，随时获得最优的寻路效果</li>
<li>静态路由算法的特点是简便和开销较小，在拓扑变化不大的小网络中运行效果很好。<br>动态路由算法能改善网络的性能并有助于流量控制</li>
<li>但算法复杂，会增加网络的负担，有时因对动态变化的反应太快而引起振荡，或反应太慢而影响网络路由的一致性</li>
<li>常用的动态路由算法可分为两类：距离-向量路由算法和链路状态路由算法。</li>
</ul>
</li>
</ul>
<h4 id="2-距离-向量路由算法"><a href="#2-距离-向量路由算法" class="headerlink" title="2.距离-向量路由算法"></a>2.距离-向量路由算法</h4><ul>
<li>在距离-向量路由算法中，<strong>所有结点</strong>都定期地将它们的整个路由选择表传送给所有与之直接相邻的结点。<br>这种路由选择表包含：每条路径的目的地（另一结点）、路径的代价（也称距离）</li>
<li>所有的结点都监听从其他结点传来的路由选择更新信息，并在下列情况下更新它们的路由选择表<ul>
<li>被通告一条新的路由，该路由在本结点的路由表中不存在，此时本地系统加入这条新的路由。</li>
<li>发来的路由信息中有一条到达某个目的地的路由，该路由与当前使用的路由相比，有较短的距离（较小的代价）<br>此种情况下，就用经过发送路由信息的结点的新路由替换路由表中到达那个目的地的现有路由</li>
</ul>
</li>
<li>距离-向量路由算法的实质<ul>
<li>迭代计算一条路由中的站段数或延迟时间，从而得到到达一个目标的最短（最小代价）通路。<br>它要求每个结点在每次更新时都将它的全部路由表发送给所有相邻的结点。</li>
<li>更新报文的大小与通信子网的结点个数成正比，所有结点都将参加路由选择信息交换</li>
<li>最常见的距离-向量路由算法是RIP算法，它采用“跳数”作为距离的度量</li>
</ul>
</li>
<li>在距离-向量路由协议中，“好消息传得快，而坏消息传得慢”，<br>这就导致了当路由信息发生变化时，该变化未能及时地被所有路由器知道，而仍然可能在路由器之间进行传递，这就是“慢收敛”现象。慢收敛是导致发生路由回路的根本原因。</li>
</ul>
<h4 id="3-链路状态路由算法"><a href="#3-链路状态路由算法" class="headerlink" title="3.链路状态路由算法"></a>3.链路状态路由算法</h4><ul>
<li>链路状态路由算法的过程<ul>
<li>在一个链路状态路由选择中，一个结点检查所有直接链路的状态，并将所得的状态信息发送给网上的所有其他结点，<br>而不是仅送给那些直接相连的结点。每个结点都用这种方式从网上所有其他的结点接收包含直接链路状态的路由选择信息。</li>
<li>每当链路状态报文到达时，路由结点便使用这些状态信息去更新自己的网络拓扑和状态“视野图”</li>
<li>一旦链路状态发生变化，结点就对更新的网络图利用Dijkstra最短路径算法重新计算路由，从单一的源出发计算到达所有目的结点的最短路径。</li>
</ul>
</li>
<li>链路状态路由算法的特点<ul>
<li>每个参与该算法的结点都具有完全的网络拓扑信息并执行下述两项任务<ul>
<li>主动测试所有邻接结点的状态。两个共享一条链接的结点是相邻结点，它们连接到同一条链路，或者连接到同一广播型物理网络。</li>
<li>定期地将链路状态传播给所有其他结点（或称路由结点）</li>
</ul>
</li>
<li>向本自治系统中所有路由器发送信息，使用洪泛法，即路由器通过所有端口向所有相邻的路由器发送信息；<br>而每个相邻路由器又将此信息发往其所有相邻路由器（但不再发送给刚刚发来信息的那个路由器）</li>
<li>发送的信息是与路由器相邻的所有路由器的链路状态，但这只是路由器所知道的部分信息。<ul>
<li>“链路状态”是指说明本路由器与哪些路由器相邻及该链路的“度量”</li>
<li>对于OSPF算法，链路状态的“度量”主要用来表示费用、距离、时延、带宽等。</li>
</ul>
</li>
<li>只有当链路状态发生变化时，路由器才向所有路由器发送此信息。由于一个路由器的链路状态只涉及相邻路由器的连通状态，而与整个互联网的规模并无直接关系，因此链路状态路由算法可以用于大型的或路由信息变化聚敛的互联网环境。</li>
<li>典型的链路状态算法是OSPF算法。</li>
</ul>
</li>
<li><p>链路状态路由算法的优点</p>
<ul>
<li>每个路由结点都使用同样的原始状态数据独立地计算路径，而不依赖中间结点的计算<br>链路状态报文不加改变地传播，因此采用该算法易于查找故障。</li>
<li>当一个结点从所有其他结点接收到报文时，它可以在本地立即计算正确的通路，保证一步汇聚。</li>
<li>由于链路状态报文仅运载来自单个结点关于直接链路的信息，其大小与网络中的路由结点数目无关，<br>因此链路状态算法比距离-向量算法有更好的规模可伸展性。</li>
</ul>
</li>
<li><p>距离-向量路由算法与链路状态路由算法的比较</p>
<ul>
<li>在距离-向量路由算法中，每个结点仅与它的直接邻居交谈，它为它的邻居提供从自己到网络中所有其他结点的最低费用估计。</li>
<li>在链路状态路由算法中，每个结点通过广播的方式与所有其他结点交谈，但它仅告诉它们与它直接相连的链路的费用。<br>相较之下，距离-向量路由算法有可能遇到路由环路等问题。</li>
</ul>
</li>
</ul>
<h4 id="4-层次路由（✠）"><a href="#4-层次路由（✠）" class="headerlink" title="4.层次路由（✠）"></a>4.层次路由（✠）</h4><ul>
<li>路由选择必须按照层次的方式进行，因特网将整个互联网划分为许多较小的自治系统（注意一个自治系统中包含很多局域网）<br>每个自治系统有权自主地决定本系统内应采用何种路由选择协议。</li>
<li>如果两个自治系统需要通信，那么就需要一种在两个自治系统之间的协议来屏蔽这些差异。</li>
<li>因特网把路由选择协议划分为两大类<ul>
<li>一个自治系统内部所使用的路由选择协议称为<strong>内部网关协议(IGP)</strong>，也称域内路由选择，具体的协议有<u>RIP和OSPF</u>等。</li>
<li>自治系统之间所使用的路由选择协议称为<strong>外部网关协议(EGP)</strong>，也称域间路由选择，<br>用在不同自治系统的路由器之间交换路由信息，并负责为分组在不同自治系统之间选择最优的路径。具体的协议有<u>BGP</u></li>
</ul>
</li>
<li>使用层次路由时，OSPF将一个自治系统再划分为若干区域(Area)，每个路由器都知道在本区域内如何把分组路由到目的地的细节，但不用知道其他区域的内部结构。</li>
<li>采用分层次划分区域的方法虽然会使交换信息的种类增多，也会使OSPF协议更加复杂。<br>但这样做却能使每个区域内部交换路由信息的通信量大大减小，因而使OSPF协议能够用于规模很大的自治系统中。</li>
</ul>
<h3 id="三-IPV4（✪）"><a href="#三-IPV4（✪）" class="headerlink" title="三.IPV4（✪）"></a>三.IPV4（✪）</h3><h4 id="1-IPV4分组"><a href="#1-IPV4分组" class="headerlink" title="1.IPV4分组"></a>1.IPV4分组</h4><ul>
<li>IPv4分组的格式<ul>
<li>一个IP分组由首部和数据部分组成。首部前一部分的长度固定，共20B，是所有IP分组必须具有的。</li>
<li>在首部固定部分的后面是一些可选字段，其长度可变，用来提供错误检测及安全等机制。</li>
<li>首部中的一些重要字段<ul>
<li>版本<ul>
<li>指 IP 协议的版本, 目前广泛使用的版本号为 4 </li>
</ul>
</li>
<li>首部长度<ul>
<li>占 4 位，可以表示的最大十进制数是 15 。以 32 位为单位，最大值为${60 \mathrm{B}}{(15 \times 4 \mathrm{B})}$。<br>最常用的首部长度是${20 \mathrm{B}}$, 此时不使用任何选项（即可选字段）。</li>
</ul>
</li>
<li>总长度<ul>
<li>占 16 位。指首部和数据之和的长度，单位为字节，因此数据报的最大长度为${2^{16}-1=65535 \mathrm{B}}$。</li>
<li>以太网帧的最大传送单元 (MTU) 为${1500 \mathrm{B}}$， 因此当一个 IP 数据报封装成帧时,<br>数据报的总长度 (首部加数据) 一定不能超过下面的数据链路层的 MTU 值。</li>
</ul>
</li>
<li>标识<ul>
<li>占 16 位。它是一个计数器，每产生一个数据报就加 1 , 并赋值给标识字段。但它并不是 “序号” (因为 IP 是无连接服务)</li>
<li>当一个数据报的长度超过网络的 MTU 时，必须分片，此时每个数据报片都复制一次标识号, 以便能正确重装成原来的数据报。 </li>
</ul>
</li>
<li>标志<ul>
<li>占 3 位。标志字段的最低位为${M F, M F=1}$表示后面还有分片, $MF{=0}$表示最后一个分片</li>
<li>标志字段中间的一位是 DF，只有当 DF${=0}$ 时才允许分片。</li>
</ul>
</li>
<li>片偏移<ul>
<li>占 13 位。它指出较长的分组在分片后, 某片在原分组中的相对位置。</li>
<li>片偏移以 8 个字节为偏移单位。除最后一个分片外, 每个分片的长度一定是${8 \mathrm{B}}$的整数倍。</li>
</ul>
</li>
<li>生存时间 (TTL)<ul>
<li>占 8 位。数据报在网络中可通过的路由器数的最大值, 标识分组在网络中的寿命, 以确保分组不会永远在网络中循环。<br>路由器在转发分组前, 先把 TTL 减 1 。 若 TTL 被减为 0 , 则该分组必须丢弃。（一个分组可以经过的最多的跳数）</li>
</ul>
</li>
<li>协议<ul>
<li>占 8 位。指出此分组携带的数据使用何种协议, 即分组的数据部分应上交给哪个协议进行处理, 如 TCP、UDP 等。</li>
<li>其中值为 6 表示 TCP, 值为 17 表示 UDP。</li>
</ul>
</li>
<li>首部校验和<ul>
<li>占 16 位。<u>首部校验和只校验分组的首部</u>, 而不校验数据部分。 </li>
</ul>
</li>
<li>源地址字段：占 4B, 标识发送方的 IP 地址。</li>
<li>目的地址字段：占 4B, 标识接收方的 IP 地址。</li>
</ul>
</li>
<li><strong>注意，在IP数据报首部中有三个关于长度的标记，首部长度、总长度、片偏移，</strong><br><strong>基本单位分别为4B、1B、8B（需要记住）。题目中经常会出现这几个长度之间的加减运算。</strong></li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/05/pPkv8ht.png" alt="pPkv8ht.png"></li>
</ul>
</li>
</ul>
</li>
<li>IP数据报分片<ul>
<li>分片的流程<ul>
<li>创建一个 IP 数据报时, 源主机为该数据报加上一个标识号。</li>
<li>当一个<u>中间路由器</u>需要将一个数据报分片时, 形成的每个数据报 (即片) 都具有原始数据报的标识号。</li>
<li>当 IP 数据报的总长度大于链路层 MTU 时, 就需要将 IP 数据报中的数据分装在多个较小的 IP 数据报中, 这些较小的数据报称为片。</li>
<li>片在<u>目的主机网络层</u>被重新组装。目的主机使用 IP 首部中的标识、标志和片偏移字段来完成对片的重组。</li>
<li>当目的主机收到来自同一发送主机的一批数据报时, 它可以通过检查数据报的标识号来确定哪些数据报属于同一个原始数据报的片。</li>
<li>目的主机在对片进行重组时, 使用片偏移字段来确定片应放在原始 IP 数据报的哪个位置。</li>
</ul>
</li>
<li>标志位<ul>
<li>IP 首部中的标志位占 3 位, 但只有后 2 位有意义, 分别是 MF 位 (More Fragment) 和 DF 位 (Don’t Fragment)。</li>
<li>只有当 $DF{=0}$时，该 IP 数据报才可以被分片。</li>
<li>$MF$ 则用来告知目的主机该 IP 数据报是否为原始数据报的最后一个片。<ul>
<li>当${\mathrm{MF}=1}$时, 表示相应的原始数据报还有后续的片</li>
<li>当${\mathrm{MF}=0}$时, 表示该数据报是相应原始数据报的最后一个片。</li>
</ul>
</li>
</ul>
</li>
<li>分片的例子<ul>
<li>一个长 4000B 的 IP 数据报 (首部 20B, 数据部分${3980 \mathrm{B}}$) 到达一个路由器, 需要转发到一条 MTU 为${1500 \mathrm{B}}$的链路上</li>
<li>原始数据报中的${3980 \mathrm{B}}$数据必须被分配到 3 个独立的片中 (每片也是一个 IP 数据报)。</li>
<li>由于偏移值的单位是${8 \mathrm{B}}$, 所以除最后一个片外, 其他所有片中的有效数据载荷都是 8 的倍数。</li>
<li>$片偏移=（之前分片的总数据-20<em>(分片序数-1)/8$，如第三个分片的偏移量为（3000-20</em>2）/ 8<br>第二个分片的偏移量为：（1500-20）/ 8</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/05/pPkzGy8.png" alt="pPkzGy8.png"></li>
</ul>
</li>
</ul>
</li>
<li>例题<ul>
<li>此时不仅要满足最大分片数量这个条件，还需要满足片偏移的数据量是8的倍数的条件，以第一个分片为准，其可能的数据量为：800-20=780，780中满足8的倍数的最大数为776，因此第一个分片的最大长度为779。显然779*2&lt;1580，此时第二个分片的MF标志位为1，总长度字段为796<br><img src="https://s1.ax1x.com/2023/08/06/pPAgJ0g.png" alt="pPAgJ0g.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="2-IPV4地址与NAT"><a href="#2-IPV4地址与NAT" class="headerlink" title="2.IPV4地址与NAT"></a>2.IPV4地址与NAT</h4><ul>
<li>IPv4地址（32位，由网络号与主机号组成）<ul>
<li>IP地址的分类，注意每一类的前几位是固定的数字<ul>
<li><img src="https://s1.ax1x.com/2023/08/06/pPAtTvn.png" alt="pPAtTvn.png"></li>
</ul>
</li>
<li>常见的三类IP地址的使用范围<ul>
<li><img src="https://s1.ax1x.com/2023/08/05/pPApPv6.png" alt="pPApPv6.png"></li>
<li>A类地址可用的网络数为$2^{7}-2$，减2的原因是<ul>
<li>第一，网络号字段全为0的IP地址是保留地址，意思是“本网络”</li>
<li>第二，网络号为127的IP地址是环回自检地址。</li>
</ul>
</li>
</ul>
</li>
<li>近年来, 由于广泛使用无分类 IP 地址进行路由选择, 这种传统分类的 IP 地址已成为历史。</li>
<li>特殊的IP地址<ul>
<li><img src="https://s1.ax1x.com/2023/08/06/pPAtOET.png" alt="pPAtOET.png"></li>
</ul>
</li>
<li>IP地址的特点<ul>
<li>每个 IP 地址都由网络号和主机号两部分组成，因此 IP 地址是一种分等级的地址结构。<br>分等级的好处是：<ul>
<li>IP 地址管理机构在分配 IP 地址时只分配网络号, 而主机号则由得到该网络的单位自行分配，方便了 IP 地址的管理</li>
<li>路由器仅根据目的主机所连接的网络号转发分组 (而不考虑目标主机号), 从而减小了路由表所占的存储空间。</li>
</ul>
</li>
<li>IP 地址是标志一台主机 (或路由器) 和一条链路的接口，路由器至少存在两个端口，因此路由器至少有两个IP地址</li>
<li>在同一个局域网上的主机或路由器的 IP 地址中的网络号必须是一样的。路由器总是具有两个或两个以上的 IP 地址, 路由器的每个端口都有一个不同网络号的 IP 地址。</li>
<li>用转发器或桥接器 (网桥等) 连接的若干 LAN 仍然是同一个网络 (同一个广播域), 因此该 LAN 中所有主机的 IP 地址的网络必须相同, 但主机号必须不同。</li>
<li>在 IP 地址中, 所有分配到网络号的网络 (无论是 LAN 还是 WAN) 都是平等的。</li>
</ul>
</li>
</ul>
</li>
<li>网络地址转换(NAT)<ul>
<li>NAT的概述<ul>
<li>网络地址转换 (NAT) 是指通过将专用网络地址转换为公用地址，从而对外隐藏内部管理的 IP 地址。</li>
<li>它使得整个专用网只需要一个全球 IP 地址就可以与因特网连通，由于专用网本地 IP 地址是可重用的，所以NAT大大节省了 IP 地址的消耗。同时, 它隐藏了内部网络结构, 从而降低了内部网络受到攻击的风险。</li>
<li>在因特网中的所有路由器, 对目的地址是私有地址的数据报一律不进行转发。<br>这种采用私有 IP 地址的互联网络称为专用互联网或本地互联网。私有 IP 地址也称可重用地址。</li>
</ul>
</li>
<li><strong>私有网段</strong>（私有IP地址只用于 LAN, 不用于WAN连接）<ul>
<li>${\mathrm{A}}$类: 1 个${\mathrm{A}}$类网段，即${\mathbf{1 0} .0 .0 .0 \sim \mathbf{1 0} .255 .255 .255}$</li>
<li>${B}$类: 16 个${B}$类网段，即${172.16 .0 .0 \sim 172.31 .255 .255}$。</li>
<li>$C$ 类: 256 个${C}$类网段, 即 $192.168.0.0\sim192.168.255.255$。</li>
</ul>
</li>
<li>NAT路由器<ul>
<li>使用 NAT 时需要在专用网连接到因特网的路由器上安装 NAT 软件, NAT 路由器至少有一个有效的外部全球 IP 地址。<br>使用本地地址的主机和外界通信时, NAT 路由器使用 NAT 转换表进行本地 IP 地址和全球 IP 地址的转换。</li>
<li>NAT 转换表中存放着 \{本地 IP 地址: 端口 \} 到 \{全球 IP 地址: 端 口${\}}$的映射。<br>通过这种映射方式, 可让多个私有 IP 地址映射到一个全球 IP 地址。</li>
<li>当发送到NAT的分组的IP地址和端口同时在NAT转换表中有对应时才转发，只有没有两个同时对应的，就直接丢弃该分组。</li>
<li>普通路由器在转发IP数据报时，不改变其源IP地址和目的IP地址。<br>而NAT路由器在转发IP数据报时，一定要更换其IP地址(转换源IP地址或目的IP地址)。</li>
<li>普通路由器仅工作在网络层，而NAT路由器转发数据报时需要查看和转换传输层的端口号</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/05/pPAAI1J.png" alt="pPAAI1J.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="3-子网划分与子网掩码、CIDR（♚）"><a href="#3-子网划分与子网掩码、CIDR（♚）" class="headerlink" title="3.子网划分与子网掩码、CIDR（♚）"></a>3.子网划分与子网掩码、CIDR（♚）</h4><ul>
<li><p>子网划分</p>
<ul>
<li>子网划分的影响<ul>
<li>将原来较大的网络细分为几个规模较小的网络，减少广播域的大小，减少主机的数量（子网号占据了主机号位）</li>
<li><strong>提高IP地址的利用率，并不增加网络的数量</strong></li>
</ul>
</li>
<li>子网划分的基本思路如下:<ul>
<li>子网划分纯属一个单位内部的事情。单位对外仍然表现为没有划分子网的网络。</li>
<li><strong>从主机号借用若干比特作为子网号, 当然主机号也就相应减少了相同的比特</strong>。三级IP地址的结构如下<br>IP 地址={&lt;网络号&gt;,&lt;子网号&gt;,&lt;主机号&gt;}。</li>
<li>凡是从其他网络发送给本单位某台主机的 IP 数据报, 仍然是根据 IP 数据报的目的网络号, 先找到连接到本单位网络上的路由器，然后该路由器在收到 IP 数据报后, 按目的网络号和子网号找到目的子网。最后把 IP 数据报直接交付给目的主机。</li>
</ul>
</li>
<li>例<ul>
<li><img src="https://s1.ax1x.com/2023/08/06/pPAftK0.png" alt="pPAftK0.png"></li>
</ul>
</li>
</ul>
</li>
<li>子网掩码（定长）<ul>
<li>网络号的位上均为1，主机号的位上均为0，子网掩码与IP地址逐位相与，就得到子网网络地址</li>
<li>现在的因特网标准规定：所有的网络都必须使用子网掩码。如果一个网络未划分子网，那么就采用默认子网掩码。<ul>
<li>A、B、C类地址的默认子网掩码分别为255.0.0.0、255.255.0.0、255.255.255.0</li>
</ul>
</li>
<li>同属于一个子网的所有主机及路由器的相应端口，必须设置相同的子网掩码</li>
<li>路由器的路由表中，所包含信息的主要内容有目的网络地址、子网掩码、下一跳地址。</li>
<li><strong>牢记下面这些常用的二进制转换关系，首先根据子网掩码判断主机号，子网号的占位，之后通过IP地址与子网掩码作与运算，求出相应的网络地址</strong><ul>
<li><img src="https://s1.ax1x.com/2023/08/06/pPAUGex.png" alt="pPAUGex.png"></li>
</ul>
</li>
</ul>
</li>
<li>无分类编址（CIDR，可变长，构成超网）<ul>
<li>CIDR的概述<ul>
<li>无分类域间路由选择${\mathrm{CIDR}}$是在变长子网掩码的基础上提出的一种消除传统${\mathrm{A}}$、${\mathrm{B}}$、${\mathrm{C}}$类网络划分,<br>并且可以在软件的支持下实现超网构造的一种 IP 地址的划分方法。</li>
<li>CIDR 使用 “网络前缀” 的概念代替子网络的概念, 与传统分类 IP 地址最大的区别就是，网络前缀的位数不是固定的，可以任意选取。CIDR 的记法是：IP::${=\{&lt;}$网络前缀${&gt;,&lt;}$主机号${&gt;\}}$</li>
<li>CIDR 还使用 “斜线记法” (或称 CIDR 记法), 即 IP 地址/网络前缀所占比特数。其中, 网络前缀所占比特数对应于网络号的部分, 等效于子网掩码中连续 1 的部分</li>
<li>CIDR 的优点在于网络前缀长度的灵活性。由于上层网络的前缀长度较短，因此相应的路由表的项目较少。<br>而内部又可采用延长网络前缀的方法来灵活地划分子网</li>
</ul>
</li>
<li>CIDR地址块<ul>
<li>将网络前缀都相同的连续 IP 地址组成 “CIDR 地址块”。一个 CIDR 地址块可以表示很多地址, 这种地址的聚合称为路由聚合, 或称构成超网。</li>
<li>CIDR 地址块中的地址数一定是 2 的整数次幂, 实际可指派的地址数通常为${2^{N}-2, N}$表示主机号的位数, 主机号全0代表网络号, 主机号全 1 为广播地址。</li>
<li>网络前缀越短, 其地址块所包含的地址数就越多。而在三级结构的 IP 地址中, 划分子网使网络前缀变长。</li>
<li>例如<ul>
<li><img src="https://s1.ax1x.com/2023/08/06/pPAs3dA.png" alt="pPAs3dA.png"></li>
</ul>
</li>
</ul>
</li>
<li>路由聚合<ul>
<li>将两个网络地址取交集可以构成超网，实现路由聚合</li>
<li>路由聚合使得路由表中的一个项目可以表示多个原来传统分类地址的路由, 有利于减少路由器之间的信息的交换, 从而提高网络性能。</li>
<li>例<ul>
<li><img src="https://s1.ax1x.com/2023/08/06/pPAsWyF.png" alt="pPAsWyF.png"></li>
</ul>
</li>
</ul>
</li>
<li>最长前缀匹配 (最佳匹配)<ul>
<li>使用 CIDR 时, 路由表中的每个项目由 “网络前缀” 和 “下一跳地址” 组成。</li>
<li>使用路由表中的网络地址与IP地址做与运算，如果匹配则待定</li>
<li>在查找路由表时可能会得到不止一个匹配结果。此时, 应当从匹配结果中选择具有最长网络前缀的路由, 因为网络前缀越长, 其地址块就越小, 因而路由就越具体。</li>
</ul>
</li>
</ul>
</li>
<li>网络层转发分组的过程<ul>
<li>转发表中两个特殊的路由<ul>
<li>主机路由<ul>
<li>对特定目的主机的IP地址专门指明一个路由，以方便网络管理员控制和测试网络。</li>
<li>若特定主机的IP地址是a.b.c.d,则转发表中对应项的目的网络是a.b.c.d/32<br>32表示的子网掩码没有意义，但这个特殊的前缀可以用在转发表中。</li>
</ul>
</li>
<li>默认路由<ul>
<li>用特殊前缀0.0.0.0/0表示默认路由，全0掩码和任何目的地址进行按位与运算，结果必然为全0<br>必然和转发表中的0.0.0.0/0相匹配</li>
<li>只要目的网络是其他网络（不在转发表中），就一律选择默认路由。<br>与其它表项都不匹配时</li>
</ul>
</li>
</ul>
</li>
<li>流程<ul>
<li>从收到的 IP 分组的首部提取目的主机的 IP 地址${D}$(即目的地址)。</li>
<li>若查找到特定主机路由 (目的地址为${D}$), 就按照这条路由的下一跳转发分组<br>否则从转发表中的下一条 (即按前缀长度的顺序) 开始检查</li>
<li>将这一行的子网掩码与目的地址${D}$进行按位与运算。若运算结果与本行的前缀匹配，则查找结束，按照 “下一跳” 指出的进行处理 (或者直接交付本网络上的目的主机, 或通过指定接口发送到下一跳路由器)。否则, 若转发表还有下一行, 则对下一行进行检查</li>
<li>若转发表中有一个默认路由, 则把分组传送给默认路由; 否则, 报告转发分组出错。</li>
<li>例题<ul>
<li>此时先从前缀最长的开始检查，子网掩码为22的项与分组目的地址不匹配，之后看子网掩码为11的目的网络，<br>此时可以匹配，于是从R2转发出去<br><img src="https://s1.ax1x.com/2023/08/06/pPAJ7Gj.png" alt="pPAJ7Gj.png"></li>
</ul>
</li>
</ul>
</li>
<li>注意 <ul>
<li>得到下一跳路由器的 IP 地址后, 并不是直接将该地址填入待发送的数据报, 而是将该IP地址转换成 MAC 地址 (通过 ARP)<br>将此 MAC 地址放到 MAC 帧首部中, 然后根据这个 MAC 地址找到下一跳路由器。</li>
<li>在不同网络中传送时, MAC 帧中的源地址和目的地址要发生变化, 但是网桥在转发帧时, 不改变帧的源地址, 请注意区分。<br>IP数据报头部的源地址与目的地址不发生变化（没有NAT的情况下）</li>
</ul>
</li>
</ul>
</li>
<li>相关例题<ul>
<li>例1：首先B类地址要划分子网的话，还有主机位的16位可以划分，再通过主机数目求得主机位数，之后可以求得相应的子<ul>
<li><img src="https://s1.ax1x.com/2023/08/06/pPARLlt.png" alt="pPARLlt.png"></li>
</ul>
</li>
<li>例2：用填充法来划分相应的情况，划分出五种即可<ul>
<li><img src="https://s1.ax1x.com/2023/08/06/pPAfWVO.png" alt="pPAfWVO.png"></li>
</ul>
</li>
<li>例3：此时需要将各个网络可划分的情况列举出来，看是否满足3个子网下刚好契合<ul>
<li><img src="https://s1.ax1x.com/2023/08/06/pPAhCMq.png" alt="pPAhCMq.png"></li>
<li><img src="https://s1.ax1x.com/2023/08/06/pPAhAdU.png" alt="pPAhAdU.png"></li>
</ul>
</li>
<li>例4：首先目的地址一定就是web服务器的地址，但是源地址需要将私有地址经过NAT路由器进行转换，<br>此时根据NAT路由器链路的网段信息（题干中），此时只剩下两个主机位，只有可能是01或10，于是选符合条件的D选项<ul>
<li><img src="https://s1.ax1x.com/2023/08/06/pPAhzTO.png" alt="pPAhzTO.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="4-ARP、DHCP与ICMP"><a href="#4-ARP、DHCP与ICMP" class="headerlink" title="4.ARP、DHCP与ICMP"></a>4.ARP、DHCP与ICMP</h4><ul>
<li><p>IP 地址与硬件地址</p>
<ul>
<li>IP 地址是网络层使用的地址, 它是分层次等级的。</li>
<li>硬件地址是数据链路层使用的地址 (MAC 地址), 它是平面式的。</li>
<li>在 IP 层抽象的互联网上只能看到 IP 数据报，虽然在 IP 数据报首部中有源 IP 地址，但路由器只根据目的 IP 地址进行转发。</li>
<li>在局域网的链路层, 只能看见 MAC 帧。IP 数据报被封装在 MAC 帧中, 通过路由器转发 IP 分组时, 会重新封装源硬件地址和目的硬件地址</li>
</ul>
</li>
<li><p>地址解析协议 (ARP，网络层协议)</p>
<ul>
<li>使用ARP协议来完成IP地址到MAC地址的映射</li>
<li>每台主机都设有一个 ARP 高速缓存, 用来存放本局域网上各主机和路由器的 IP 地址到 MAC 地址的映射表, 称 ARP 表。<br>使用 ARP 来动态维护此 ARP 表。</li>
<li>ARP的原理（工作在网络层）<ul>
<li>主机 A 欲向本局域网上的某台主机 B 发送 IP 数据报时, 先在其 ARP 高速缓存中查看有无主机 B 的 IP 地址。</li>
<li>如果有, 就可查出其对应的硬件地址, 再将此硬件地址写入 MAC 帧, 然后通过局域网将该 MAC 帧发往此硬件地址。</li>
<li>如果没有, 那么就通过使用目的 MAC 地址为 FFFF-FF-FF-FF-FF 的帧来封装并广播 ARP 请求分组 (广播发送), 使同一个局域网里的所有主机都收到此 ARP 请求。<strong>尽管 ARP 请求分组是广播发送的, 但 ARP 响应分组是普通的单播</strong>，即从一个源地址发送到一个目的地址。</li>
<li>主机 B 收到该 ARP 请求后, 向主机 A 发出 ARP 响应分组 (单播发送), 分组中包含主机 B 的 IP 与 MAC 地址的映射关系, 主机 A 收到 ARP 响应分组后就将此映射写入 ARP 缓存, 然后按查询到的硬件地址发送 MAC 帧。</li>
<li>如果所要找的主机和源主机不在同一个局域网上, 那么就要通过 ARP 找到一个位于本局域网上的某个路由器的硬件地址<br>然后把分组发送给这个路由器, 让这个路由器把分组转发给下一个网络。 剩下的工作就由下一个网络来做</li>
<li>例<ul>
<li>首先主机通过ARP找到局域网内的路由器，再经过路由器之间的4次使用ARP协议到达B所造的路由器，最后此路由器再使用一次ARP协议即可找到主机B，一共进行了6次<br><img src="https://s1.ax1x.com/2023/08/06/pPAtVcn.png" alt="pPAtVcn.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>动态主机配置协议 (DHCP，应用层协议) </p>
<ul>
<li>常用于给主机动态地分配 IP 地址, 它提供了即插即用的联网机制<br>这种机制允许一台计算机加入新的网络和获取IP地址而不用手工参与，<strong>DHCP 是应用层协议, 它是基于 UDP 的。</strong></li>
<li>DHCP 的工作原理如下<ul>
<li>使用客户/服务器（C/S）模式。需要 IP 地址的主机在启动时就向 DHCP 服务器广播发送发现报文<br>本地网络上所有主机都能收到此广播报文, 但只有 DHCP 服务器才回答此广播报文。</li>
<li>DHCP 服务器先在其数据库中查找该计算机的配置信息。若找到，则返回找到的信息。</li>
<li>若找不到，则从服务器的 IP 地址池中取一个地址分配给该计算机。DHCP 服务器的回答报文称为提供报文。</li>
</ul>
</li>
<li>DHCP的特点<ul>
<li>DHCP 允许网络上配置多台 DHCP 服务器, 当 DHCP 客户机发出 “DHCP 发现” 消息时, 有可能收到多个应答消息。<br>这时, DHCP 客户机只会挑选其中的一个, 通常挑选最先到达的。</li>
<li>DHCP 服务器分配给 DHCP 客户的 IP 地址是临时的, 因此 DHCP 客户只能在一段有限的时间内使用这个分配到的 IP 地址DHCP 称这段时间为租用期。租用期的数值应由 DHCP 服务器自己决定, DHCP 客户也可在自己发送的报文中提出对租用期的要求。</li>
<li><strong>DHCP 的客户端和服务器端需要通过广播方式来进行交互</strong>, 原因是在 DHCP 执行初期, 客户端不知道服务器端的 IP 地址, 而在执行中间，客户端并未被分配 IP 地址, 从而导致两者之间的通信必须采用广播的方式。</li>
<li>采用 UDP 而不采用 TCP 的原因也很明显：TCP 需要建立连接, 如果连对方的 IP 地址都不知道, 那么更不可能通过双方的套接字建立连接。</li>
<li>DHCP 是应用层协议, 因为它是通过客户/服务器模式工作的, DHCP 客户端向 DHCP 服务器请求服务, 而其他层次的协议是没有这两种工作方式的</li>
</ul>
</li>
</ul>
</li>
<li><p>网际控制报文协议 (ICMP，网络层协议)</p>
<ul>
<li><p>为了提高 IP 数据报交付成功的机会, 在网络层使用了网际控制报文协议 (ICMP) 来让主机或路由器报告差错和异常情况。</p>
</li>
<li><p><strong>ICMP 报文作为 IP 层数据报的数据, 加上数据报的首部, 组成 IP 数据报发送出去。</strong></p>
</li>
<li><p>ICMP 报文的种类</p>
<ul>
<li><p>ICMP 差错报告报文</p>
<ul>
<li>ICMP 差错报告报文用于目标主机或到目标主机路径上的路由器向源主机报告差错和异常情况。</li>
<li>种类<ul>
<li>终点不可达，当路由器或主机不能交付数据报时，就向源点发送终点不可达报文。</li>
<li>源点抑制，当路由器或主机由于拥塞而丢弃数据报时，就向源点发送源点抑制报文，<br>使源点知道应当把数据报的发送速率放慢</li>
<li>时间超过，当路由器收到生存时间(TTL)为零的数据报时，除丢弃该数据报外，还要向源点发送时间超过报文。<br>当终点在预先规定的时间内不能收到一个数据报的全部数据报片时，就把已收到的数据报片都丢弃，并向源点发送时间超过报文。</li>
<li>参数问题，当路由器或目的主机收到的数据报的首部中有的字段的值不正确时，就丢弃该数据报，并向源点发送参数问题报文。</li>
<li>改变路由（重定向），路由器把改变路由报文发送给主机，让主机知道下次应将数据报发送给另外的路由器（可通过更好的路由）。</li>
</ul>
</li>
<li>不应发送ICMP差错报告报文的几种情况如下<ul>
<li>对ICMP差错报告报文不再发送ICMP差错报告报文</li>
<li>对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文。</li>
<li>对具有组播地址的数据报都不发送ICMP差错报告报文。</li>
<li>对具有特殊地址(如127.0.0.0或0.0.0.0)的数据报不发送ICMP差错报告报文。</li>
</ul>
</li>
</ul>
</li>
<li><p>ICMP询问报文有4种类型：回送请求和回答报文、时间戳请求和回答报文、地址掩码请求和回答报文、路由器询问和通告报文，最常用的是前两类。</p>
</li>
<li><p><strong>ICMP的两个常见应用是分组网间探测PING（用来测试两台主机之间的连通性）和Traceroute</strong></p>
<p>PING使用了ICMP回送请求和回答报文，Traceroute(Tracert)使用了ICMP时间超过报文。</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="四-IPV6"><a href="#四-IPV6" class="headerlink" title="四.IPV6"></a>四.IPV6</h3><h4 id="1-IPv6的主要特点"><a href="#1-IPv6的主要特点" class="headerlink" title="1.IPv6的主要特点"></a>1.IPv6的主要特点</h4><ul>
<li>IPv6的主要特点<ul>
<li><strong>IPv6将地址从32位(4B)扩大到128位(16B),更大的地址空间</strong></li>
<li>IPv6将IPv4的<strong>校验和字段彻底移除</strong>，以减少每跳的处理时间。</li>
<li>IPv6支持<strong>即插即用（即自动配置），不需要DHCP协议。</strong></li>
<li>IPv6<strong>首部长度必须是8B的整数倍</strong>，IPv4首部是4B的整数倍。<br><strong>且首部长度固定为40B</strong></li>
<li><strong>IPv6中不允许分片</strong>。因此，如果路由器发现到来的数据报太大而不能转发到链路上，<br>那么丢弃该数据报，并向发送方发送一个指示分组太大的ICMP报文。</li>
</ul>
</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/07/pPEZyrj.png" alt="pPEZyrj.png"></li>
</ul>
</li>
</ul>
<h4 id="2-IPv6地址"><a href="#2-IPv6地址" class="headerlink" title="2.IPv6地址"></a>2.IPv6地址</h4><ul>
<li><p>IPv6数据报的三种类型</p>
<ul>
<li>单播：单播就是传统的点对点通信</li>
<li>多播：多播是一点对多点的通信，分组被交付到一组计算机的每台计算机</li>
<li>任播：这是IPv6增加的一种类型。<br>任播的目的站是一组计算机，但数据报在交付时只交付其中的一台计算机，通常是距离最近的一台计算机。</li>
</ul>
</li>
<li><p>IPv6的地址表示法</p>
<ul>
<li>即把地址中的每4位用一个十六进制数表示，并用冒号分隔每16位，如4BF5:0000:0000:0000:BA5F:039A:000A:2176</li>
<li>当16位域的开头有一些0时，可以采用一种缩写表示法，但在域中必须至少有一个数字。<br>可以把地址缩写为4BF5:0:0:0:BA5F:39A:A:2176</li>
<li>当有相继的0值域时，还可以进一步缩写。这些域可以用双冒号缩写，双冒号表示法在一个地址中仅能出现一次，<br>可以写成4BF5::BA5F:39A:A:2176</li>
</ul>
</li>
</ul>
<h3 id="五-路由协议（✠）"><a href="#五-路由协议（✠）" class="headerlink" title="五.路由协议（✠）"></a>五.路由协议（✠）</h3><h4 id="1-自治系统（AS）"><a href="#1-自治系统（AS）" class="headerlink" title="1.自治系统（AS）"></a>1.自治系统（AS）</h4><ul>
<li>单一技术管理下的一组路由器，这些路由器使用一种AS内部的路由选择协议和共同的度量来确定分组在该AS内的路由，<br>同时还使用一种AS之间的路由选择协议来确定分组在AS之间的路由。</li>
<li>一个自治系统内的所有网络都由一个行政单位(如一家公司、一所大学、一个政府部门等)管辖，<br>一个自治系统的所有路由器在本自治系统内都必须是连通的。</li>
</ul>
<h4 id="2-域内路由与域间路由"><a href="#2-域内路由与域间路由" class="headerlink" title="2.域内路由与域间路由"></a>2.域内路由与域间路由</h4><ul>
<li>自治系统内部的路由选择称为域内路由选择，自治系统之间的路由选择称为域间路由选择</li>
<li>因特网有两大类路由选择协议<ul>
<li>内部网关协议(IGP)<ul>
<li>内部网关协议即在一个自治系统内部使用的路由选择协议，它与互联网中其他自治系统选用什么路由选择协议无关。<br>目前这类路由选择协议使用得最多，如RIP和OSPF。</li>
</ul>
</li>
<li>外部网关协议(EGP)<ul>
<li>若源站和目的站处在不同的自治系统中，当数据报传到一个自治系统的边界时（两个自治系统可能使用不同的IGP)<br>就需要使用一种协议将路由选择信息传递到另一个自治系统，目前使用最多的外部网关协议是BGP4</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="3-路由信息协议（RIP-✠）"><a href="#3-路由信息协议（RIP-✠）" class="headerlink" title="3.路由信息协议（RIP ✠）"></a>3.路由信息协议（RIP ✠）</h4><ul>
<li><p>RIP是一种分布式的<strong>基于距离向量</strong>的路由选择协议，其最大优点就是简单</p>
</li>
<li><p><strong>RIP是应用层协议，它使用UDP传送数据(端口520)。</strong></p>
</li>
<li><p>RIP选择的路径不一定是时间最短的，但一定是具有<strong>最少路由器的路径</strong>。因为它是根据最少跳数进行路径选择的。</p>
<p>要求网络中每一个路由器都维护从它自己到其他每一个目的网络的唯一最佳距离记录（即一组距离）。</p>
</li>
<li><p>RIP的规定</p>
<ul>
<li>网络中的每个路由器都要维护从它自身到其他每个目的网络的距离记录（因此这是一组距离，称为距离向量）</li>
<li><strong>距离也称跳数</strong>，规定从一个路由器到直接连接网络的距离（跳数）为1。而每经过一个路由器，距离（跳数）加1</li>
<li>RIP认为好的路由就是它通过的路由器的数目少，即优先选择跳数少的路径</li>
<li><strong>RIP允许一条路径最多只能包含15个路由器(即最多允许15跳)。因此距离等于16时，它表示网络不可达</strong>。<br>RIP只适用于小型互联网。距离向量路由可能会出现环路的情况，规定路径上的最高跳数的目的是为了防止数据报不断循环在环路上，减少网络拥塞的可能性</li>
<li>RIP默认在任意两个使用RIP的路由器之间每30秒广播一次RIP路由更新信息，以便自动建立并维护路由表（动态维护）</li>
</ul>
</li>
<li><p>RIP的特点(注意与OSPF的特点比较)</p>
<ul>
<li><strong>仅和相邻路由器交换信息</strong>。</li>
<li><strong>路由器交换的信息是当前路由器所知道的全部信息，即自己的路由表。</strong></li>
<li>按固定的时间间隔交换路由信息，如每隔30秒</li>
<li>RIP通过距离向量算法来完成路由表的更新。经过若干RIP广播后，所有路由器都最终知道了整个RIP网络的路由表，<br>称为RIP最终是收敛的。</li>
<li><strong>通过RIP收敛后，每个路由器到每个目标网络的路由都是距离最短的（即跳数最少，最短路由），哪怕还存在另一条高速（低时延）但路由器较多的路由。</strong></li>
</ul>
</li>
<li><p>距离向量算法（✪）</p>
<ul>
<li>每个路由表项目都有三个关键数据：&lt;目的网络N，距离d，下一跳路由器地址X&gt;</li>
<li><p>对于每个相邻路由器发送过来的RIP报文，执行如下步骤</p>
<ul>
<li><strong>对地址为X的相邻路由器发来的RIP报文，先修改此报文中的所有项目</strong><br><strong>把“下一跳”字段中的地址都改为X,并把所有“距离”字段的值加1</strong></li>
<li><p>对修改后的RIP报文中的每个项目，执行如下步骤</p>
<ul>
<li>当原来的路由表中没有目的网络N时，把该项目添加到路由表中</li>
<li>当原来的路由表中有目的网络N，且下一跳路由器的地址是X时，用收到的项目替换原路由表中的项目</li>
<li>当原来的路由表中有目的网络N，且下一跳路由器的地址不是X时，<br>如果收到的项目中的距离d小于路由表中的距离，那么就用收到的项目替换原路由表中的项目<br>否则什么也不做。</li>
</ul>
</li>
<li><p>如果180秒(RIP默认超时时间为180秒)还没有收到相邻路由器的更新路由表，<br>那么把此相邻路由器记为不可达路由器，即把距离设置为16(距离为16表示不可达)</p>
</li>
</ul>
</li>
<li><p>例题</p>
<ul>
<li><p>例1</p>
<ul>
<li><img src="https://s1.ax1x.com/2023/08/07/pPEeMes.png" alt="pPEeMes.png"></li>
</ul>
</li>
<li><p>例2</p>
<ul>
<li><img src="https://s1.ax1x.com/2023/08/07/pPEmE7R.png" alt="pPEmE7R.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>RIP的优点：最大的优点是实现简单、开销小、收敛过程较快。</p>
</li>
<li><p>RIP的缺点（✪）</p>
<ul>
<li>限制了网络的规模，它能使用的最大距离为15(16表示不可达)</li>
<li>路由器之间交换的是路由器中的完整路由表，因此网络规模越大，开销也越大</li>
<li>网络出现故障时，会出现<strong>慢收敛现象</strong>（即需要较长时间才能将此信息传送到所有路由器），<br><strong>俗称“坏消息传得慢”，使更新过程的收敛时间长</strong></li>
<li>理解坏消息传的慢，此时R1还会向R2发送原来链路可到达的信息，因此R2的距离会更新到3<ul>
<li><img src="https://s21.ax1x.com/2024/08/12/pApeFcF.png" alt="pApeFcF.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="4-开放最短路径优先协议（OSPF）"><a href="#4-开放最短路径优先协议（OSPF）" class="headerlink" title="4.开放最短路径优先协议（OSPF）"></a>4.开放最短路径优先协议（OSPF）</h4><ul>
<li>OSPF是使用分布式链路状态路由算法的典型代表，也是内部网关协议(IGP)的一种。</li>
<li><strong>OSPF是网络层协议，它不使用UDP或TCP,而直接用IP数据报传送（其IP数据报首部的协议字段为89)</strong></li>
<li><strong>当互联网规模很大时，OSPF要比RIP好得多，而且OSPF协议没有“坏消息传播得慢”的问题。</strong></li>
<li>OSPF的特点<ul>
<li>OSPF对不同的链路可根据IP分组的不同服务类型(TOS)而设置成不同的代价。<br>因此，OSPF对于不同类型的业务可计算出不同的路由，十分灵活。</li>
<li>如果到同一个目的网络有多条相同代价的路径，那么可以将通信量分配给这几条路径。这称为多路径间的负载平衡。</li>
<li>所有在OSPF路由器之间交换的分组都具有鉴别功能，因而保证了仅在可信赖的路由器之间交换链路状态信息。</li>
<li>支持可变长度的子网划分和无分类编址CDR</li>
<li>每个链路状态都带上一个32位的序号，序号越大，状态就越新。</li>
</ul>
</li>
<li>OSPF的基本工作原理<ul>
<li>各路由器之间频繁地交换链路状态信息，因此所有路由器最终都能建立一个链路状态数据库。<br>这个数据库实际上就是全网的拓扑结构图，它在全网范围内是一致的（称为链路状态数据库的同步）。</li>
<li>每个路由器根据这个全网拓扑结构图，使用Dijkstra最短路径算法计算从自己到各目的网络的最优路径，以此构造自己的路由表。</li>
<li>此后当链路状态发生变化时，每个路由器重新计算到各目的网络的最优路径，构造新的路由表。</li>
</ul>
</li>
<li>区域的概念<ul>
<li>为使OSPF能够用于规模很大的网络，OSPF将一个自治系统再划分为若干更小的范围，称为区域。</li>
<li>划分区域的好处是，将利用洪泛法交换链路状态信息的范围局限于每个区域而非整个自治系统，减少了整个网络上的通信量。</li>
<li>在一个区域内部的路由器只知道本区域的完整网络拓扑，而不知道其他区域的网络拓扑情况。</li>
<li>区域也有层次之分。处在上层的域称为主千区域，负责连通其他下层的区域，并且还连接其他自治域。</li>
<li>采用分层划分区域的方法使交换信息的种类增多，OSPF协议更加复杂</li>
</ul>
</li>
<li>OSPF与RIP的4点主要区别<ul>
<li><strong>OSPF向本自治系统中的所有路由器发送信息，这里使用的方法是洪泛法。而RIP仅向自己相邻的几个路由器发送信息</strong></li>
<li><strong>发送的信息是与本路由器相邻的所有路由器的链路状态，但这只是路由器所知道的部分信息。</strong><br><strong>“链路状态”说明本路由器和哪些路由器相邻及该链路的“度量”（或代价）。</strong><br><strong>而在RIP中，发送的信息是本路由器所知道的全部信息，即整个路由表。</strong></li>
<li>只有当链路状态发生变化时，路由器才用洪泛法向所有路由器发送此信息，并且更新过程收敛得快，<br>不会出现RIP“坏消息传得慢”的问题。而在RIP中，不管网络拓扑是否发生变化，路由器之间都会定期交换路由表的信息</li>
<li>OSPF是网络层协议，它不使用UDP或TCP,而直接用IP数据报传送（其IP数据报首部的协议字段为89)<br>而RIP是应用层协议，它在传输层使用UDP</li>
</ul>
</li>
</ul>
<h4 id="5-边界网关协议（BGP）"><a href="#5-边界网关协议（BGP）" class="headerlink" title="5.边界网关协议（BGP）"></a>5.边界网关协议（BGP）</h4><ul>
<li>边界网关协议(BGP)是不同自治系统的路由器之间交换路由信息的协议，是一种外部网关协议。<br>边界网关协议常用于互联网的网关之间。</li>
<li><strong>边界网关协议(BGP)只能力求寻找一条能够到达目的网络且比较好的路由（不能兜圈子），而并非寻找一条最佳路由。</strong></li>
<li>BGP采用的是路径向量路由选择协议，它与距离向量协议和链路状态协议有很大的区别。</li>
<li><strong>BGP是应用层协议，它是基于TCP的。</strong></li>
</ul>
<h4 id="6-三种路由协议的区别（✪）"><a href="#6-三种路由协议的区别（✪）" class="headerlink" title="6.三种路由协议的区别（✪）"></a>6.三种路由协议的区别（✪）</h4><ul>
<li><img src="https://s1.ax1x.com/2023/08/06/pPAz7qS.png" alt="pPAz7qS.png"></li>
</ul>
<h3 id="六-IP组播"><a href="#六-IP组播" class="headerlink" title="六.IP组播"></a>六.IP组播</h3><h4 id="1-组播的概念"><a href="#1-组播的概念" class="headerlink" title="1.组播的概念"></a>1.组播的概念</h4><ul>
<li><p>组播的概念</p>
<ul>
<li>为了能够支持像视频点播和视频会议这样的多媒体应用，网络必须实施某种有效的组播机制。</li>
</ul>
</li>
</ul>
<ul>
<li>当网络中的某些用户需要特定数据时，组播数据发送者仅发送一次数据，借助组播路由协议为组播数据包建立组播分<br>发树，被传递的数据到达距离用户端尽可能近的节点后才开始复制和分发，是一种点对多点的传输方式</li>
</ul>
<ul>
<li><strong>组播一定仅应用于UDP，</strong>它对将报文同时送往多个接收者的应用来说非常重要。</li>
</ul>
<ul>
<li><strong>在IPV4中，组播地址在D类地址空间中分配，而IPv6也有一部分地址空间保留给组播组。</strong></li>
</ul>
<ul>
<li>组播的流程<ul>
<li><strong>主机使用一个称为IGMP（因特网组管理协议）的协议加入组播组。</strong>它们使用该协议通知本地网络上的路由器关于要接收发送给某个组播组的分组的愿望。<br>通过扩展路由器的路由选择和转发功能，可以在许多路由器互连的支持硬件组播的网络上面实现因特网组播</li>
<li>对发送者而言，数据只需发送一次就可发送到所有接收者，大大减轻了网络的负载和发送者的负担。</li>
<li>主机组播时仅发送一份数据，只有数据在传送路径出现分岔时才将分组复制后继续转发<br>组播需要路由器的支持才能实现，能够运行组播协议的路由器称为组播路由器。</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/06/pPEpUpR.png" alt="pPEpUpR.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="2-IP组播地址"><a href="#2-IP组播地址" class="headerlink" title="2.IP组播地址"></a>2.IP组播地址</h4><ul>
<li><strong>IP组播使用D类地址格式。D类地址的前四位是1110，因此D类地址范围是224.0.0.0~239.255.255.255。</strong><br><strong>每个D类IP地址标志一个组播组。</strong></li>
<li><p>组播数据报的特点</p>
<ul>
<li>组播数据报也是“尽最大努力交付”，不提供可靠交付。</li>
<li>组播地址只能用于目的地址，而不能用于源地址。</li>
<li>对组播数据报不产生ICMP差错报文。因此，若在PING命令后面键入组播地址，将永远不会收到响应。</li>
<li>并非所有的D类地址都可作为组播地址。</li>
</ul>
</li>
<li><p>硬件组播（MAC地址的前六位固定，后六位由IP地址的后23位映射得来）</p>
<ul>
<li><img src="https://s21.ax1x.com/2024/08/12/pApeEnJ.png" alt="pApeEnJ.png"></li>
</ul>
</li>
</ul>
<h4 id="3-IGMP与组播路由算法"><a href="#3-IGMP与组播路由算法" class="headerlink" title="3.IGMP与组播路由算法"></a>3.IGMP与组播路由算法</h4><ul>
<li><p>IGMP的概念</p>
<ul>
<li>要使路由器知道组播组成员的信息，需要利用因特网组管理协议（IGMP)。</li>
<li>IGMP让连接到本地局域网上的组播路由器知道本局域网上是否有主机参加或退出了某个组播组。</li>
<li>IGMP并不是在因特网范围内对所有组播组成员进行管理的协议。IGMP不知道IP组播组包含的成员数，也不知道这些成员分布在哪些网络上。</li>
</ul>
</li>
<li>IGMP的工作原理<ul>
<li>当某台主机加入新的组播组时，该主机应向组播组的组播地址发送一个IGMP报文，声明自己要成为该组的成员。本地的组播路由器收到IGMP报文后，将组成员关系转发给因特网上的其他组播路由器。</li>
<li>本地组播路由器要周期性地探询本地局域网上的主机，以便知道这些主机是否仍继续是组的成员。只要对某个组有一台主机响应，那么组播路由器就认为这个组是活跃的。</li>
<li>但一个组在经过几次的探询后仍然没有一台主机响应时，则不再将该组的成员关系转发给其他的组播路由器。</li>
</ul>
</li>
<li>组播路由选择协议<ul>
<li>连接到局域网上的组播路由器还必须和因特网上的其他组播路由器协同工作，以便把组播数据报用最小代价传送给所有组成员，这就需要使用组播路由选择协议。</li>
<li>组播路由选择实际上就是要找出以源主机为根结点的<strong>组播转发树</strong>，其中每个分组在每条链路上只传送一次（即在组播转发树上的路由器不会收到重复的组播数据报），<strong>可以避免路由环路</strong></li>
<li>不同的多播组对应于不同的多播转发树：同一个多播组，对不同的源点也会有不同的多播转发树。</li>
<li>在许多由路由器互连的支持硬件多点传送的网络上实现因特网组播时，主要有三种路由算法：<ul>
<li>第一种是基于链路状态的路由选择</li>
<li>第二种是基于距离-向量的路由选择</li>
<li>第三种可以建立在任何路由器协议之上，因此称为协议无关的组播(PIM)。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="七-移动IP"><a href="#七-移动IP" class="headerlink" title="七.移动IP"></a>七.移动IP</h3><h4 id="1-移动IP的概念"><a href="#1-移动IP的概念" class="headerlink" title="1.移动IP的概念"></a>1.移动IP的概念</h4><ul>
<li>移动IP技术是移动结点(计算机/服务器等)以固定的网络IP地址，实现跨越不同网段的漫游功能，<br><strong>并保证了基于网络IP的网络权限在漫游过程中不发生任何改变</strong>。</li>
<li>移动结点：具有永久IP地址的移动设备。</li>
<li>归属代理（本地代理）：一个移动结点的永久“居所”称为归属网络，<br>在归属网络中代表移动节点执行移动管理功能的实体叫做归属代理</li>
<li>永久地址(归属地址/主地址)：移动站点在归属网络中的原始地址。</li>
<li>外部代理（外地代理）：在外部网络中帮助移动节点完成移动管理功能的实体称为外部代理</li>
<li>转交地址（辅地址）：可以是外部代理的地址或动态配置的一个地址。</li>
</ul>
<h4 id="2-移动IP通信过程"><a href="#2-移动IP通信过程" class="headerlink" title="2.移动IP通信过程"></a>2.移动IP通信过程</h4><ul>
<li><img src="https://s1.ax1x.com/2023/08/07/pPECJzR.png" alt="pPECJzR.png"></li>
</ul>
<h3 id="八-网络层设备（✪）"><a href="#八-网络层设备（✪）" class="headerlink" title="八.网络层设备（✪）"></a>八.网络层设备（✪）</h3><h4 id="1-冲突域和广播域"><a href="#1-冲突域和广播域" class="headerlink" title="1.冲突域和广播域"></a>1.冲突域和广播域</h4><ul>
<li>冲突域<ul>
<li>冲突域是指连接到同一物理介质上的所有结点的集合，这些结点之间存在介质争用的现象。</li>
<li>在OSI参考模型中，冲突域被视为第1层概念，像集线器、中继器等简单无脑复制转发信号的第1层设备所连接的结点都属于同一个冲突域，也就是说它们不能划分冲突域。</li>
<li>而第2层（网桥、交换机）、第3层（路由器）设备都可以划分冲突域。</li>
<li>一个交换机的所有端口属于一个广播域，每个端口属于一个冲突域</li>
</ul>
</li>
<li>广播域<ul>
<li>广播域是指接收同样广播消息的结点集合。也就是说，在该集合中的任何一个结点发送一个广播帧，其他能收到这个帧的结点都被认为是该广播域的一部分。</li>
<li>在OSI参考模型中，广播域被视为第2层概念，像第1层（集线器等）、第2层（交换机等）设备所连接的结点都属于同一个<br>广播域。</li>
<li>路由器，作为第3层设备，则可以划分广播域，即可以连接不同的广播域。</li>
<li>通常所说的局域网(LAN)特指使用路由器分割的网络，也就是广播域</li>
</ul>
</li>
</ul>
<h4 id="2-路由器的组成与功能"><a href="#2-路由器的组成与功能" class="headerlink" title="2.路由器的组成与功能"></a>2.路由器的组成与功能</h4><ul>
<li><p>路由器的概述</p>
<ul>
<li><p>路由器是一种具有多个输入/输出端口的专用计算机，其任务是连接不同的网络（连接异构网络）并完成路由转发。<br>在多个逻辑网络（即多个广播域）互连时必须使用路由器。</p>
</li>
<li><p>当源主机要向目标主机发送数据报时，路由器先检查源主机与目标主机是否连接在同一个网络上。如果源主机和目标主机在同一个网络上，那么直接交付而无须通过路由器。</p>
</li>
<li>如果源主机和目标主机不在同一个网络上，那么路由器按照转发表（路由表）指出的路由将数据报转发给下一个路由器，这称为间接交付。</li>
<li><strong>路由器隔离了广播域。从结构上看，路由器由路由选择和分组转发两部分构成，而从模型的角度看，路由器是网络层设备，它实现了网络模型的下三层，即物理层、数据链路层和网络层。</strong></li>
</ul>
</li>
<li><p>路由器的组成</p>
<ul>
<li>路由选择部分<ul>
<li>路由选择部分也称控制部分，其核心构件是路由选择处理机，还包括路由选择协议，路由表</li>
<li>路由选择处理机的任务是根据所选定的路由选择协议构造出路由表，同时经常或定期地和相邻路由器交换路由信息而不断更新和维护路由表。</li>
</ul>
</li>
<li>分组转发部分<ul>
<li>由三部分组成：交换结构、一组输入端口和一组输出端口。</li>
<li>交换结构是路由器的关键部件，它根据转发表对分组进行处理，将某个输入端口进入的分组从一个合适的输出端口转发出去<br>交换结构本身就是一个网络</li>
<li>输入端口在从物理层接收到的比特流中提取出数据链路层帧，进而从帧中提取出网络层数据报<br>输出端口则执行恰好相反的操作</li>
<li>有三种常用的交换方法：通过存储器进行交换、通过总线进行交换和通过互联网络进行交换</li>
</ul>
</li>
</ul>
</li>
<li><p>路由器的功能</p>
<ul>
<li>路由计算：通过和其他路由器进行基于路由协议的交互，完成路由表的计算。</li>
<li>分组转发：处理通过路由器的数据流，关键操作是转发表查询、转发及相关的队列管理和任务调度等</li>
<li>当路由器监测到拥塞时，可合理丢弃IP分组，并向发出该IP分组的源主机发送一个源点抑制的ICMP报文。</li>
<li>路由器对收到的IP分组首部进行差错检验，丢弃有差错首部的报文，但不保证IP分组不丢失。</li>
</ul>
</li>
<li><p>路由器和网桥的区别</p>
<ul>
<li>网桥与高层协议无关，而路由器是面向协议的，它依据网络地址进行操作，并进行路径选择、分段、帧格式转换、对数据报的生存时间和流量进行控制等。</li>
<li>现今的路由器一般都提供多种协议的支持，包括OSI、TCP/IP、IPX等</li>
</ul>
</li>
</ul>
<h4 id="3-路由表与路由转发"><a href="#3-路由表与路由转发" class="headerlink" title="3.路由表与路由转发"></a>3.路由表与路由转发</h4><ul>
<li>路由表是根据路由选择算法得出的，主要用途是路由选择。</li>
<li>标准的路由表有4个项目：目的网络IP地址、子网掩码、下一跳IP地址、接口<br>可能包含默认路由（0.0.0.0、0.0.0.0）</li>
<li>图片<ul>
<li><img src="https://s21.ax1x.com/2024/08/12/pApeZ7R.png" alt="pApeZ7R.png"></li>
</ul>
</li>
<li>转发表与路由表的区别<ul>
<li>转发表是从路由表得出的，其表项和路由表项有直接的对应关系。</li>
<li>但转发表的格式和路由表的格式不同，<strong>其结构应使查找过程最优化（而路由表则需对网络拓扑变化的计算最优化）</strong></li>
<li>转发表中含有一个分组将要发往的目的地址，以及分组的下一跳（即下一步接收者的目的地址，实际为MAC地址）</li>
<li>为了减少转发表的重复项目，可以使用一个默认路由代替所有具有相同“下一跳”的项目，并将默认路由设置得比其他项目的优先级低</li>
<li>路由表总是用软件来实现的；转发表可以用软件来实现，甚至也可以用特殊的硬件来实现。</li>
</ul>
</li>
</ul>

      
    </div>
    
    
    



    

    

    

    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>-------------</div>
    
</div>

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag"><i class="fa fa-tag"></i> 计算机网络</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2024/08/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/" rel="next" title="计算机网络第三章-数据链路层">
                <i class="fa fa-chevron-left"></i> 计算机网络第三章-数据链路层
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2024/08/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E4%BC%A0%E8%BE%93%E5%B1%82/" rel="prev" title="计算机网络第五章-传输层">
                计算机网络第五章-传输层 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>

  </div>
  
  
  
  </article>
  



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">
      
      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/header.gif"
                alt="沙漠客" />
            
              <p class="site-author-name" itemprop="name">沙漠客</p>
              <p class="site-description motion-element" itemprop="description">Action speak louder than words!</p>
          </div>
        <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=100 src="//music.163.com/outchain/player?type=2&id=1396311816&auto=1&height=66"></iframe>
        </iframe>
          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/">
              
                  <span class="site-state-item-count">37</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/sichuanshamoke" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://blog.csdn.net/m0_51960673?spm=1000.2115.3001.5343" target="_blank" title="CSDN">
                      
                        <i class="fa fa-fw fa-fa fa-codiepie"></i>CSDN</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.kaggle.com/sichuanshamoke" target="_blank" title="kaggle">
                      
                        <i class="fa fa-fw fa-stack-overflow"></i>kaggle</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://leetcode.cn/u/amazing-snyderdc5/" target="_blank" title="LeetCode">
                      
                        <i class="fa fa-fw fa-skype"></i>LeetCode</a>
                  </span>
                
            </div>
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <!-- modify icon to fire by szw -->
                <i class="fa fa-history fa-" aria-hidden="true"></i>
                近期文章
              </div>
              <ul class="links-of-blogroll-list">
                
                
                  <li class="recent_posts_li">
                    <a href="/2024/11/04/%E8%B6%85%E5%88%86%E8%BE%A8%E7%8E%87%E7%AC%AC%E5%85%AB%E7%AB%A0-RDN/" title="超分辨率第八章-RDN" target="_blank">超分辨率第八章-RDN</a>
                  </li>
                
                  <li class="recent_posts_li">
                    <a href="/2024/10/28/%E8%B6%85%E5%88%86%E8%BE%A8%E7%8E%87%E7%AC%AC%E5%85%AB%E7%AB%A0-SR&transformer/" title="超分辨率第八章-SR&transformer" target="_blank">超分辨率第八章-SR&transformer</a>
                  </li>
                
                  <li class="recent_posts_li">
                    <a href="/2024/10/20/%E8%B6%85%E5%88%86%E8%BE%A8%E7%8E%87%E7%AC%AC%E4%B8%83%E7%AB%A0-SRFBN/" title="超分辨率第七章-SRFBN" target="_blank">超分辨率第七章-SRFBN</a>
                  </li>
                
                  <li class="recent_posts_li">
                    <a href="/2024/09/26/%E8%B6%85%E5%88%86%E8%BE%A8%E7%8E%87%E7%AC%AC%E5%85%AD%E7%AB%A0-RCAN/" title="超分辨率第六章-RCAN" target="_blank">超分辨率第六章-RCAN</a>
                  </li>
                
                  <li class="recent_posts_li">
                    <a href="/2024/09/23/%E8%B6%85%E5%88%86%E8%BE%A8%E7%8E%87%E7%AC%AC%E4%BA%94%E7%AB%A0-SRDenseNet/" title="超分辨率第五章-SRDenseNet" target="_blank">超分辨率第五章-SRDenseNet</a>
                  </li>
                
              </ul>
            </div>
          


          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                友情链接
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://space.bilibili.com/562700874?spm_id_from=333.1365.0.0" title="风翼飞镰" target="_blank">风翼飞镰</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="nav-text">计算机网络第四章-网络层</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80-%E7%BD%91%E7%BB%9C%E5%B1%82%E7%9A%84%E5%8A%9F%E8%83%BD%EF%BC%88%E2%9C%A0%EF%BC%89"><span class="nav-text">一.网络层的功能（✠）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%BC%82%E6%9E%84%E7%BD%91%E7%BB%9C%E4%BA%92%E8%81%94"><span class="nav-text">1.异构网络互联</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%BD%AC%E5%8F%91"><span class="nav-text">2.路由与转发</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-SDN%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-text">3.SDN的基本概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="nav-text">4.拥塞控制</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8C-%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95"><span class="nav-text">二.路由算法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E4%B8%8E%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1"><span class="nav-text">1.静态路由与动态路由</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E8%B7%9D%E7%A6%BB-%E5%90%91%E9%87%8F%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95"><span class="nav-text">2.距离-向量路由算法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95"><span class="nav-text">3.链路状态路由算法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E5%B1%82%E6%AC%A1%E8%B7%AF%E7%94%B1%EF%BC%88%E2%9C%A0%EF%BC%89"><span class="nav-text">4.层次路由（✠）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89-IPV4%EF%BC%88%E2%9C%AA%EF%BC%89"><span class="nav-text">三.IPV4（✪）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-IPV4%E5%88%86%E7%BB%84"><span class="nav-text">1.IPV4分组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-IPV4%E5%9C%B0%E5%9D%80%E4%B8%8ENAT"><span class="nav-text">2.IPV4地址与NAT</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86%E4%B8%8E%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81%E3%80%81CIDR%EF%BC%88%E2%99%9A%EF%BC%89"><span class="nav-text">3.子网划分与子网掩码、CIDR（♚）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-ARP%E3%80%81DHCP%E4%B8%8EICMP"><span class="nav-text">4.ARP、DHCP与ICMP</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%9B-IPV6"><span class="nav-text">四.IPV6</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-IPv6%E7%9A%84%E4%B8%BB%E8%A6%81%E7%89%B9%E7%82%B9"><span class="nav-text">1.IPv6的主要特点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-IPv6%E5%9C%B0%E5%9D%80"><span class="nav-text">2.IPv6地址</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%94-%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%EF%BC%88%E2%9C%A0%EF%BC%89"><span class="nav-text">五.路由协议（✠）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E8%87%AA%E6%B2%BB%E7%B3%BB%E7%BB%9F%EF%BC%88AS%EF%BC%89"><span class="nav-text">1.自治系统（AS）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%9F%9F%E5%86%85%E8%B7%AF%E7%94%B1%E4%B8%8E%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1"><span class="nav-text">2.域内路由与域间路由</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF%E5%8D%8F%E8%AE%AE%EF%BC%88RIP-%E2%9C%A0%EF%BC%89"><span class="nav-text">3.路由信息协议（RIP ✠）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E5%BC%80%E6%94%BE%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%BC%98%E5%85%88%E5%8D%8F%E8%AE%AE%EF%BC%88OSPF%EF%BC%89"><span class="nav-text">4.开放最短路径优先协议（OSPF）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE%EF%BC%88BGP%EF%BC%89"><span class="nav-text">5.边界网关协议（BGP）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-%E4%B8%89%E7%A7%8D%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%88%E2%9C%AA%EF%BC%89"><span class="nav-text">6.三种路由协议的区别（✪）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%AD-IP%E7%BB%84%E6%92%AD"><span class="nav-text">六.IP组播</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E7%BB%84%E6%92%AD%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="nav-text">1.组播的概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-IP%E7%BB%84%E6%92%AD%E5%9C%B0%E5%9D%80"><span class="nav-text">2.IP组播地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-IGMP%E4%B8%8E%E7%BB%84%E6%92%AD%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95"><span class="nav-text">3.IGMP与组播路由算法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%83-%E7%A7%BB%E5%8A%A8IP"><span class="nav-text">七.移动IP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E7%A7%BB%E5%8A%A8IP%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="nav-text">1.移动IP的概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E7%A7%BB%E5%8A%A8IP%E9%80%9A%E4%BF%A1%E8%BF%87%E7%A8%8B"><span class="nav-text">2.移动IP通信过程</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%AB-%E7%BD%91%E7%BB%9C%E5%B1%82%E8%AE%BE%E5%A4%87%EF%BC%88%E2%9C%AA%EF%BC%89"><span class="nav-text">八.网络层设备（✪）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%86%B2%E7%AA%81%E5%9F%9F%E5%92%8C%E5%B9%BF%E6%92%AD%E5%9F%9F"><span class="nav-text">1.冲突域和广播域</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E7%BB%84%E6%88%90%E4%B8%8E%E5%8A%9F%E8%83%BD"><span class="nav-text">2.路由器的组成与功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E8%B7%AF%E7%94%B1%E8%A1%A8%E4%B8%8E%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91"><span class="nav-text">3.路由表与路由转发</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2023 &mdash; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Shamoke</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">258k</span>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: true,
        appId: 'wsUYJtlLslOYlG6pA3pS9i30-gzGzoHsz',
        appKey: 'd1H2YDHxgJkfTsFw0UhNNMFJ',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

    <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }
 
    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }
 
    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }
 
    .highlight-wrap {
      position: relative;
    }
  </style>
 
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
 
        if(result)$(this).text('复制成功')
        else $(this).text('复制失败')
 
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('复制')
        }, 300)
      }).append(e)
    })
  </script>	
  
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
