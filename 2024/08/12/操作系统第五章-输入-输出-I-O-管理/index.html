<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="操作系统," />





  <link rel="alternate" href="/atom.xml" title="懷仁堂" type="application/atom+xml" />






<meta name="description" content="操作系统第五章 输入&#x2F;输出（I&#x2F;O）管理 计算机学科基础：操作系统第五章输入&#x2F;输出(I&#x2F;O)管理的学习笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="操作系统第五章-输入&#x2F;输出(I&#x2F;O)管理">
<meta property="og:url" content="http://example.com/2024/08/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BE%93%E5%85%A5-%E8%BE%93%E5%87%BA-I-O-%E7%AE%A1%E7%90%86/index.html">
<meta property="og:site_name" content="懷仁堂">
<meta property="og:description" content="操作系统第五章 输入&#x2F;输出（I&#x2F;O）管理 计算机学科基础：操作系统第五章输入&#x2F;输出(I&#x2F;O)管理的学习笔记">
<meta property="og:locale">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/25/pPtdZlT.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/25/pPtdx41.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/25/pPt0FzV.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/25/pPt0AMT.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/25/pPt0Lk9.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/25/pPtBYcV.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/25/pPtDiuT.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/25/pPtD1bD.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/25/pPtgkb6.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/25/pPtWvLR.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/25/pPtf3lQ.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/25/pPtI6gO.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/25/pPtHKzV.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/25/pPN9BOs.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/25/pPN9ckV.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/25/pPN9fl4.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/26/pPN3pHx.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/26/pPNutDf.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/26/pPNDsk4.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/26/pPNQCE8.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/26/pPNQNb6.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/26/pPNlkdK.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/26/pPNl2l9.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/26/pPNl5TK.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/26/pPNlbSH.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/26/pPNJSDs.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/26/pPNDMOf.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/26/pPNDGkQ.png">
<meta property="og:image" content="https://s1.ax1x.com/2023/08/26/pPNM9fJ.png">
<meta property="article:published_time" content="2024-08-11T17:34:20.000Z">
<meta property="article:modified_time" content="2024-08-12T03:18:37.355Z">
<meta property="article:author" content="Shamoke">
<meta property="article:tag" content="操作系统">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s1.ax1x.com/2023/08/25/pPtdZlT.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":true,"scrollpercent":true,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://example.com/2024/08/12/操作系统第五章-输入-输出-I-O-管理/"/>





  <title>操作系统第五章-输入/输出(I/O)管理 | 懷仁堂</title>
  








<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
  

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <a target="_blank" rel="noopener" href="https://github.com/sichuanshamoke" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">懷仁堂</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Studying and Recording</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />
            
            日程表
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>
    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/08/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BE%93%E5%85%A5-%E8%BE%93%E5%87%BA-I-O-%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="沙漠客">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="懷仁堂">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">操作系统第五章-输入/输出(I/O)管理</h1>
        

        <div class="post-meta">
          
          
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-08-12T01:34:20+08:00">
                2024-08-12
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2024-08-12T11:18:37+08:00">
                2024-08-12
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index">
                    <span itemprop="name">计算机基础学习笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2024/08/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BE%93%E5%85%A5-%E8%BE%93%E5%87%BA-I-O-%E7%AE%A1%E7%90%86/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2024/08/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BE%93%E5%85%A5-%E8%BE%93%E5%87%BA-I-O-%E7%AE%A1%E7%90%86/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  10.9k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  37
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="操作系统第五章-输入-输出（I-O）管理"><a href="#操作系统第五章-输入-输出（I-O）管理" class="headerlink" title="操作系统第五章 输入/输出（I/O）管理"></a>操作系统第五章 输入/输出（I/O）管理</h2><blockquote>
<p>计算机学科基础：操作系统第五章输入/输出(I/O)管理的学习笔记</p>
</blockquote>
<span id="more"></span>
<h3 id="一-I-O管理概述（✠）"><a href="#一-I-O管理概述（✠）" class="headerlink" title="一.I/O管理概述（✠）"></a>一.I/O管理概述（✠）</h3><h4 id="1-I-O设备"><a href="#1-I-O设备" class="headerlink" title="1.I/O设备"></a>1.I/O设备</h4><ul>
<li><p>I/O设备的定义</p>
<ul>
<li>I/O设备就是可以将数据输入到计算机，或者可以接收计算机输出数据的外部设备，属于计算机中的硬件部件</li>
<li>UNIX系统将外部设备抽象为一种特殊的文件，用户可以使用与文件操作相同的方式对外部设备进行操作。</li>
<li>Write:操作：向外部设备写出数据；Read操作：从外部设备读入数据</li>
</ul>
</li>
<li><p>I/O设备的分类</p>
<ul>
<li>按信息交换的单位分类<ul>
<li>块设备：信息交换以数据块为单位。它属于有结构设备，<strong>如磁盘等</strong>。<br>磁盘设备的基本特征是传输速率较高、可寻址，即对它可随机地读/写任意一块，<strong>如共享设备</strong>。</li>
<li>字符设备：信息交换以字符为单位。它属于无结构类型，<strong>如交互式终端机、打印机等</strong>。<br>传输速率较慢，不可寻址，在输入/输出时常采用<strong>中断驱动方式</strong></li>
</ul>
</li>
<li>按使用特性分类<ul>
<li>人机交互类外部设备：鼠标、键盘、打印机等一一用于人机交互，数据传输速度慢</li>
<li>存储设备：移动硬盘、光盘等一一用于数据存储，数据传输速度快</li>
<li>网络通信设备：调制解调器等一一用于网络通信，数据传输速度介于上述二者之间</li>
</ul>
</li>
<li>按传输速率分类<ul>
<li>低速设备。传输速率仅为每秒几字节到数百字节的一类设备，如键盘、鼠标等。</li>
<li>中速设备。传输速率为每秒数千字节至数万字节的一类设备，如激光打印机等。</li>
<li>高速设备。传输速率在数百千字节至千兆字节的一类设备，如磁盘机、光盘机等。</li>
</ul>
</li>
</ul>
</li>
<li>I/O设备的组成<ul>
<li>机械部件<ul>
<li>I/O设备的机械部件主要用来执行具体I/O操作<br>如我们看得见摸得着的鼠标/键盘的按钮；显示器的LED屏；移动硬盘的磁臂、磁盘盘面。</li>
</ul>
</li>
<li>电子部件<ul>
<li>I/O设备的电子部件通常是一块插入主板扩充槽的印刷电路板</li>
<li>I/O接口（I/O控制器，设备控制器）<ul>
<li>I/O接口（设备控制器）位于CPU与设备之间（作为中介），<br>它既要与CPU通信，又要与设备通信，还要具有按CPU发来的命令去控制设备工作的功能</li>
<li>I/O设备的功能<ul>
<li>接受和识别CPU发出的命令（<strong>要有控制寄存器</strong>）<ul>
<li>如CPU发来的read/write命令，I/O控制器中会有相应的控制寄存器来存放命令和参数</li>
</ul>
</li>
<li>向CPU报告设备的状态（<strong>要有状态寄存器</strong>）<ul>
<li>I/O控制器中会有相应的状态寄存器用于记录1/0设备的当前状态。如：1表示空闲，0表示忙碌</li>
</ul>
</li>
<li>数据交换（<strong>要有数据寄存器，暂存输入输出的数据</strong>）<ul>
<li>I/O控制器中会设置相应的数据寄存器。输出时，数据寄存器用于暂存CPU发来的数据，之后再由控制器传送设备。</li>
<li>输入时，数据寄存器用于暂存设备发来的数据，之后CPU从数据寄存器中取走数据</li>
</ul>
</li>
<li>地址识别（<strong>由I/O逻辑实现</strong>)<ul>
<li>类似于内存的地址，为了区分设备控制器中的各个寄存器，也需要给各个寄存器设置一个特定的“地址”。</li>
<li>I/O控制器通过CPU提供的“地址”来判断CPU要读/写的是哪个寄存器</li>
</ul>
</li>
</ul>
</li>
<li>I/O接口的组成<ul>
<li>CPU与控制器之间的接口（<strong>实现控制器与CPU之间的通信</strong>）<ul>
<li>用于实现CPU与控制器之间的通信。</li>
<li>CPU通过控制线发出命令；通过地址线指明要操作的设备；<br>通过数据线来取出（输入）数据，或放入（输出）数据</li>
<li>数据线常与两类寄存器相连：数据寄存器（存放从设备送来的输入数据或从CPU送来的输出数据）和控制/状态寄存器(存放从CPU送来的控制信息或设备的状态信息)。</li>
</ul>
</li>
<li>I/O逻辑（<strong>负责识别CPU发出的命令，并向设备发出命令，实现对设备的控制</strong>）<ul>
<li>用于实现对设备的控制。它通过一组控制线与CPU交互，对从CPU收到的I/O命令进行译码。</li>
<li>CPU启动设备时，将启动命令发送给控制器，同时通过地址线把地址发送给控制器，由控制器的I/O逻辑对地址进行译码，并相应地对所选设备进行控制。</li>
</ul>
</li>
<li>控制器与设备之间的接口（<strong>实现控制器与设备之间的通信</strong>）<ul>
<li>一个设备控制器可以连接一个或多个设备，因此控制器中有一个或多个设备接口。每个接口中都存在数据、控制和状态三种类型的信号。</li>
</ul>
</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/25/pPtdZlT.png" alt="pPtdZlT.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>I/O端口<ul>
<li>I/O端口是指设备控制器中可被CPU直接访问的寄存器</li>
<li>寄存器的分类<ul>
<li>数据寄存器：实现CPU和外设之间的数据缓冲。</li>
<li>状态寄存器：获取执行结果和设备的状态信息，以让CPU知道是否准备好。</li>
<li>控制寄存器：由CPU写入，以便启动命令或更改设备模式。</li>
</ul>
</li>
<li>寄存器的两种编址方式<ul>
<li>独立编址。为每个端口分配一个I/O端口号，所有I/O端口形成I/O端口空间，普通用户程序不能对其进行访问，只有操作系统使用特殊的I/O指令才能访问端口</li>
<li>统一编址。又称<strong>内存映射I/O</strong>，每个端口被分配唯一的内存地址，且不会有内存被分配这一地址，通常分配给端口的地址靠近地址空间的顶端。可以采用对内存进行操作的指令来对控制器进行操作</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/25/pPtdx41.png" alt="pPtdx41.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="2-I-O控制方式"><a href="#2-I-O控制方式" class="headerlink" title="2.I/O控制方式"></a>2.I/O控制方式</h4><ul>
<li>程序直接控制方式（轮询）<ul>
<li>完成一次读/写操作的流程<ul>
<li><img src="https://s1.ax1x.com/2023/08/25/pPt0FzV.png" alt="pPt0FzV.png"></li>
</ul>
</li>
<li>流程图<ul>
<li><img src="https://s1.ax1x.com/2023/08/25/pPt0AMT.png" alt="pPt0AMT.png"></li>
</ul>
</li>
<li>CPU干预的频率<ul>
<li>很频繁，I/O操作开始之前、完成之后需要CPU介入，并且在等待I/O完成的过程中CPU需要不断地轮询检查。</li>
</ul>
</li>
<li>数据传送的单位：每次读/写一个字</li>
<li>数据的流向<ul>
<li>读操作（数据输入）：I/O设备→CPU→内存</li>
<li>写操作（数据输出）：内存→CPU→I/O设备</li>
<li>每个字的读/写都需要CPU的帮助</li>
</ul>
</li>
<li>主要缺点和主要优点<ul>
<li>优点：实现简单。在读/写指令之后，加上实现循环检查的一系列指令即可(因此才称为“程序直接控制方式”)</li>
<li><strong>缺点：CPU和I/O设备只能串行工作，CPU需要一直轮询检查，长期处于“忙等”状态，CPU利用率低</strong>。</li>
</ul>
</li>
</ul>
</li>
<li>中断驱动方式<ul>
<li>完成一次读写操作的流程<ul>
<li>引入中断机制。由于I/O设备速度很慢，因此在CPU发出读/写命令后，可将等待I/O的进程阻塞，先切换到别的进程执行。</li>
<li>当I/O完成后，控制器会向CPU发出一个中断信号，CPU检测到中断信号后，会保存当前进程的运行环境信息，转去执行中断处理程序处理该中断。</li>
<li>处理中断的过程中，CPU从I/O控制器读一个字的数据传送到CPU寄存器，再写入主存。接着，CPU恢复等待I/O的进程（或其他进程）的运行环境，然后继续执行。</li>
<li>注意<ul>
<li>①CPU会在每个指令周期的末尾检查中断</li>
<li>②中断处理过程中需要保存、恢复进程的运行环境，这个过程是需要一定时间开销的。可见，如果中断发生的频率太高，也会降低系统性能。</li>
</ul>
</li>
</ul>
</li>
<li>流程图<ul>
<li><img src="https://s1.ax1x.com/2023/08/25/pPt0Lk9.png" alt="pPt0Lk9.png"></li>
</ul>
</li>
<li>CPU干预的频率<ul>
<li>每次I/O操作开始之前、完成之后需要CPU介入。</li>
<li>等待I/O完成的过程中CPU可以切换到别的进程执行。</li>
</ul>
</li>
<li>数据传送的单位：每次读/写一个字</li>
<li>数据的流向<ul>
<li>读操作（数据输入）：I/O设备→CPU→内存</li>
<li>写操作（数据输出）：内存→CPU→I/O设备</li>
</ul>
</li>
<li>主要缺点和主要优点<ul>
<li>优点<ul>
<li>与“程序直接控制方式”相比，在“中断驱动方式”中，I/O控制器会通过中断信号主动报告I/O已完成，CPU不再需要不停地轮询。</li>
<li>CPU和I/O设备可并行工作，CPU利用率得到明显提升。</li>
</ul>
</li>
<li>缺点：每个字在I/O设备与内存之间的传输，都需要经过CPU。而频繁的中断处理会消耗较多的CPU时间。</li>
</ul>
</li>
</ul>
</li>
<li>DMA方式（直接存储器存取，外设—内存）<ul>
<li>特点<ul>
<li><strong>数据的传送单位是“块”</strong>。不再是一个字、一个字的传送，<strong>适用于磁盘设备</strong></li>
<li><strong>数据的流向是从设备直接放入内存，或者从内存直接到设备。不再需要CPU作为中介</strong></li>
<li>仅在传送一个或多个数据块的开始和结束时，才需要CPU干预。<ul>
<li>CPU指明此次要进行的操作(如：读操作)，并说明要读入多少数据、数据要存放在内存的什么位置，数据在外部设备上的地址(如：在磁盘上的地址)</li>
<li>控制器会根据CPU提出的要求完成数据的读/写工作，整块数据的传输完成后，才向CPU发出中断信号</li>
</ul>
</li>
</ul>
</li>
<li>DMA控制器<ul>
<li><img src="https://s1.ax1x.com/2023/08/25/pPtBYcV.png" alt="pPtBYcV.png"></li>
</ul>
</li>
<li>CPU干预的频率：<strong>仅在传送一个或多个数据块的开始和结束时，才需要CPU干预</strong>。</li>
<li>数据传送的单位：每次读/写一个或多个块（注意：<strong>每次读写的只能是连续的多个块，且这些块读入内存后在内存中也必须是连续的</strong>）</li>
<li>数据的流向  (不再需要经过CPU)<ul>
<li>读操作（数据输入）：I/O设备→内存</li>
<li>写操作（数据输出）：内存→I/O设备</li>
</ul>
</li>
<li>主要缺点和主要优点<ul>
<li>优点：数据传输以“块”为单位，CPU介入频率进一步降低。<br>数据的传输不再需要先经过CPU再写入内存，数据传输效率进一步增加。CPU和I/O设备的并行性得到提升。</li>
<li>缺点：CPU每发出一条I/O指令，只能读/写一个或多个连续的数据块。<br>如果要读/写多个离散存储的数据块，或者要将数据分别写到不同的内存区域时，CPU要分别发出多条I/O指令，进行多次中断处理才能完成。</li>
</ul>
</li>
</ul>
</li>
<li>通道控制方式（<strong>硬件</strong>）<ul>
<li>通道是一种硬件，与CPU相比，通道可以执行的指令很单一，并且通道程序是放在主机内存中的，也就是说通道与CPU共享内存</li>
<li>完成一次读写操作的流程<ul>
<li><img src="https://s1.ax1x.com/2023/08/25/pPtDiuT.png" alt="pPtDiuT.png"></li>
</ul>
</li>
<li>CPU干预的频率<strong>：极低，通道会根据CPU的指示执行相应的通道程序，只有完成一组数据块的读/写后才需要发出中断信号，请求CPU干预。</strong></li>
<li>数据传送的单位：每次读/写一组数据块</li>
<li>数据的流向（在通道的控制下进行）<ul>
<li>读操作（数据输入）：I/O设备→内存</li>
<li>写操作（数据输出）：内存→I/O设备</li>
</ul>
</li>
<li>主要缺点和主要优点<ul>
<li>缺点：实现复杂，需要专门的通道硬件支持</li>
<li>优点：CPU、通道、I/O设备可并行作，资源利用率很高</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="3-I-O软件层次结构"><a href="#3-I-O软件层次结构" class="headerlink" title="3.I/O软件层次结构"></a>3.I/O软件层次结构</h4><ul>
<li>概览<ul>
<li>分为四层，越上层越接近用户，下层为上层提供服务，屏蔽实现的具体细节，越下层越接近硬件</li>
<li>中间的三层处于内核部分，称为I/O（核心子系统）系统</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/25/pPtD1bD.png" alt="pPtD1bD.png"></li>
</ul>
</li>
</ul>
</li>
<li>I/O操作的流程：用户程序→系统调用处理程序→设备驱动程序→中断处理程序。</li>
<li>用户层I/O软件<ul>
<li>用户层软件实现了与用户交互的接口，用户可直接使用该层提供的、与I/O操作相关的库函数对设备进行操作</li>
<li><strong>用户层软件将用户请求翻译成格式化的I/O请求，并通过“系统调用”请求操作系统内核的服务</strong></li>
</ul>
</li>
<li>设备独立性软件<ul>
<li><strong>设备独立性软件，又称设备无关性软件</strong>。与设备的硬件特性无关的功能几乎都在这一层实现。<br><strong>处理上层的系统调用参数</strong></li>
<li>功能<ul>
<li>①向上层提供统一的调用接口(如read/write系统调用) </li>
<li>②设备的保护</li>
<li>③差错控制</li>
<li><strong>④设备的分配与回收</strong></li>
<li><strong>⑤数据缓冲区管理</strong></li>
<li>⑥<strong>建立逻辑设备名到物理设备名的映射关系；</strong><ul>
<li>根据设备类型选择调用相应的驱动程序用户或用户层软件发出I/O操作相关系统调用的系统调用时，需要指明此次要操作的I/O设备的逻辑设备名，不同类型的I/O设备需要有不同的驱动程序处理</li>
<li>设备独立性软件需要通过逻辑设备表来确定逻辑设备对应的物理设备，并找到该设备对应的设备驱动程序</li>
</ul>
</li>
<li>管理逻辑设备表的（LUT）方式<ul>
<li>第一种方式，整个系统只设置一张LUT，这就意味着所有用户不能使用相同的逻辑设备名，因此这种方式只适用于单用户操作系统。</li>
<li>第二种方式，为每个用户设置一张ULT，各个用户使用的逻辑设备名可以重复，适用于多用户操作系统。<br>系统会在用户登录时为其建立一个用户管理进程，而LUT就存放在用户管理进程的PCB中。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>设备驱动程序（<strong>驱动程序与操作系统无关</strong>）<ul>
<li>不同的I/O设备有不同的硬件特性，具体细节只有设备的厂家才知道，因此厂家需要根据设备的硬件特性设计并提供相应的驱动程序，驱动程序一般以一个独立的进程存在</li>
<li><strong>负责对硬件设备的具体控制，将上层发出的一系列命令（如read/write)转化成特定设备“能听得懂”的一系列操作。</strong><br><strong>包括设置设备寄存器，检查设备状态等</strong></li>
<li><strong>计算数据所在磁盘的柱面号、磁头号、扇区号</strong></li>
</ul>
</li>
<li>中断处理程序<ul>
<li><strong>当I/O任务完成时，I/O控制器会发送一个中断信号，系统会根据中断信号类型找到相应的中断处理程序并执行。</strong></li>
</ul>
</li>
</ul>
<h4 id="4-应用程序I-O接口"><a href="#4-应用程序I-O接口" class="headerlink" title="4.应用程序I/O接口"></a>4.应用程序I/O接口</h4><ul>
<li>输入/输出应用程序接口<ul>
<li>包括：字符设备接口、块设备接口、网络设备接口(网络套接字)<ul>
<li><img src="https://s1.ax1x.com/2023/08/25/pPtgkb6.png" alt="pPtgkb6.png"></li>
</ul>
</li>
<li>阻塞I/O与非阻塞I/O<ul>
<li>阻塞I/O：应用程序发出I/O系统调用，进程需转为阻塞态等待。<br>如字符设备接口一一从键盘读一个字符get</li>
<li>非阻塞I/O：应用程序发出I/O系统调用，系统调用可迅速返回，进程无需阻塞等待。<br>如块设备接口一一往磁盘写数据write</li>
</ul>
</li>
</ul>
</li>
<li>设备驱动程序接口（<strong>驱动程序只与厂商有关，与操作系统无关</strong>）<ul>
<li>不同的操作系统，对设备驱动程序接口的标准各不相同。</li>
<li>设备厂商必须根据操作系统的接口要求，开发相应的设备驱动程序，设备才能被使用</li>
</ul>
</li>
</ul>
<h4 id="5-提高磁盘I-O速度的方法"><a href="#5-提高磁盘I-O速度的方法" class="headerlink" title="5.提高磁盘I/O速度的方法"></a>5.提高磁盘I/O速度的方法</h4><ul>
<li>提前读。在读磁盘当前块时，把下一磁盘块也读入内存缓冲区。</li>
<li>延迟写。仅在缓冲区首部设置延迟写标志，然后释放此缓冲区并将其链入空闲缓冲区链表的尾部，<br>当其他进程申请到此缓冲区时，才真正把缓冲区信息写入磁盘块。</li>
<li>虚拟盘。是指用内存空间去仿真磁盘，又叫RAM盘。虚拟盘是一种易失性存储器。虚拟盘常用于存放临时文件。</li>
</ul>
<h3 id="二-设备独立性软件（✠）"><a href="#二-设备独立性软件（✠）" class="headerlink" title="二.设备独立性软件（✠）"></a>二.设备独立性软件（✠）</h3><h4 id="1-假脱机（SPOOLing）技术"><a href="#1-假脱机（SPOOLing）技术" class="headerlink" title="1.假脱机（SPOOLing）技术"></a>1.假脱机（SPOOLing）技术</h4><ul>
<li>脱机技术<ul>
<li>在外围控制机的控制下，慢速输入设备的数据先被输入到更快速的磁带上<br>之后主机可以从快速的磁带上读入数据，从而缓解了速度矛盾</li>
<li><strong>引入脱机技术后，缓解了CPU与慢速I/O设备的速度矛盾。另一方面，即使CPU在忙碌，也可以提前将数据输入到磁带；</strong><br><strong>即使慢速的输出设备正在忙碌，也可以提前将数据输出到磁带</strong>。</li>
</ul>
</li>
<li>假脱机技术（<strong>用软件的方式模拟脱机技术</strong>）<ul>
<li>输入井和输出井<ul>
<li><strong>在磁盘上开辟出两个存储区域一一“输入井”和“输出井”</strong></li>
<li>“输入井”模拟脱机输入时的磁带，用于收容I/O设备输入的数据</li>
<li>“输出井”模拟脱机输出时的磁带，用于收容用户进程输出的数据</li>
</ul>
</li>
<li>输入进程和输出进程<ul>
<li><strong>要实现SPOOLing技术，必须要有多道程序技术的支持。系统会建立“输入进程”和“输出进程”</strong>。</li>
<li>输入进程模拟脱机输入时的外围控制机</li>
<li>输出进程模拟脱机输出时的外围控制机</li>
</ul>
</li>
<li>输入缓冲区和输出缓冲区<ul>
<li><strong>两个缓冲区都是在内存中的</strong></li>
<li>在输入进程的控制下，“输入缓冲区”用于暂存从输入设备输入的数据，之后再转存到输入井中</li>
<li>在输出进程的控制下，“输出缓冲区”用于暂存从输出井送来的数据，之后再传送到输出设备上</li>
</ul>
</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/25/pPtWvLR.png" alt="pPtWvLR.png"></li>
</ul>
</li>
</ul>
</li>
<li>共享打印机<ul>
<li>独占式设备一一只允许各个进程串行使用的设备。一段时间内只能满足一个进程的请求。</li>
<li>共享设备一一允许多个进程“同时”使用的设备（宏观上同时使用，微观上可能是交替使用）可以同时满足多个进程的使用请求。</li>
<li><strong>打印机是种“独占式设备”，SPOOLing技术可以把一台物理设备虚拟成逻辑上的多台设备，可将打印机变为共享设备</strong><ul>
<li><strong>虽然系统中只有一个台打印机，但每个进程提出打印请求时，系统都会为在输出井中为其分配一个存储区（外存中）；</strong><br><strong>相当于分配了一个逻辑设备，使每个用户进程都觉得自己在独占一台打印机，从而实现对打印机的共享。</strong></li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/25/pPtf3lQ.png" alt="pPtf3lQ.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="2-设备的分配与回收"><a href="#2-设备的分配与回收" class="headerlink" title="2.设备的分配与回收"></a>2.设备的分配与回收</h4><ul>
<li><strong>设备独立性是指用户在编程序时使用的设备与实际设备无关。一个程序应独立于分配给它的某类设备的具体设备，</strong><br><strong>即在用户程序中只指明I/O使用的设备类型即可。</strong></li>
<li>设备分配时应考虑的因素<ul>
<li>设备的固有属性<ul>
<li>独占设备：一个时段只能分配给一个进程（如打印机）</li>
<li>共享设备：可同时分配给多个进程使用（如磁盘），各进程往往是宏观上同时共享使用设备，而微观上交替使用。</li>
<li><strong>虚拟设备：采用SPOOLing技术将独占设备改造成虚拟的共享设备，可同时分配给多个进程使用</strong><br><strong>(如采用SPOOLing技术实现的共享打印机)</strong></li>
</ul>
</li>
<li>设备分配算法<ul>
<li>先来先服务、优先级高者优先、短任务优先等算法</li>
</ul>
</li>
<li>设备分配中的安全性<ul>
<li>安全分配方式：为进程分配一个设备后就将进程阻塞，本次I/O完成后才将进程唤醒。(考虑进程请求打印机打印输出的例子)一个时段内每个进程只能使用一个设备<ul>
<li>优点：破坏了“请求和保持”条件，不会死锁</li>
<li>缺点：对于一个进程来说，CPU和/O设备只能串行工作</li>
</ul>
</li>
<li>不安全分配方式：进程发出I/O请求后，系统为其分配I/O设备，进程可继续执行，之后还可以发出新的I/O请求。只有某I/O请求得不到满足时才将进程阻塞。一个进程可以同时使用多个设备<ul>
<li>优点：进程的计算任务和I/O任务可以并行处理，使进程迅速推进</li>
<li>缺点：有可能发生死锁（死锁避免、死锁的检测和解除)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>静态分配与动态分配<ul>
<li>静态分配：进程运行前为其分配全部所需资源，运行结束后归还资源，破坏了“请求和保持”条件，不会发生死锁</li>
<li>动态分配：进程运行过程中动态申请设备资源</li>
</ul>
</li>
<li>设备分配管理中的数据结构<ul>
<li>一个通道可控制多个设备控制器，每个设备控制器可控制多个设备。</li>
<li>设备控制表(DCT)：系统为每个设备配置一张DCT，用于记录设备情况<ul>
<li><strong>设备类型（逻辑设备名）：如打印机/扫描仪/键盘</strong></li>
<li><strong>设备标识符：即物理设备名，系统中的每个设备的物理设备名唯一</strong></li>
<li>设备状态：忙碌/空闲/故障</li>
<li><strong>指向控制器表的指针：每个设备由一个控制器控制，该指针可找到相应控制器的信息</strong></li>
<li>重复执行次数或时间：当重复执行多次I/O操作后仍不成功，才认为此次I/O失败</li>
<li>设备队列的队首指针：指向正在等待该设备的进程队列(由进程PCB组成队列)<br>系统会根据阻塞原因不同，将进程PCB挂到不同的阻塞队列中</li>
</ul>
</li>
<li>控制器控制表(COCT)：每个设备控制器都会对应一张COCT。操作系统根据COCT的信息对控制器进行操作和管理。<ul>
<li><strong>控制器标识符：各个控制器的唯一ID</strong></li>
<li>控制器状态：忙碌/空闲/故障</li>
<li><strong>指向通道表的指针：每个控制器由一个通道控制，该指针可找到相应通道的信息</strong></li>
<li>控制器队列的队首指针</li>
<li>控制器队列的队尾指针：指向正在等待该控制器的进程队列(由进程PCB组成队列)</li>
</ul>
</li>
<li>通道控制表(CHCT)：每个通道都会对应一张CHCT。操作系统根据CHCT的信息对通道进行操作和管理<ul>
<li>通道标识符：各个通道的唯一ID</li>
<li>通道状态：忙碌/空闲/故障</li>
<li>与通道连接的控制器表首址：可通过该指针找到该通道管理的所有控制器相关信息(COCT)</li>
<li>通道队列的队首指针</li>
<li>通道队列的队尾指针：指向正在等待该通道的进程队列(由进程PCB组成队列)</li>
</ul>
</li>
<li><strong>系统设备表(SDT)：记录了系统中全部设备的情况，每个设备对应一个表目。</strong></li>
</ul>
</li>
<li>设备分配的步骤<ul>
<li>步骤<ul>
<li>①根据进程请求的物理设备名查找SDT(注：物理设备名是进程请求分配设备时提供的参数)</li>
<li>②根据SDT找到DCT，若设备忙碌则将进程PCB挂到设备等待队列中，不忙碌则将设备分配给进程。</li>
<li>③根据DCT找到COCT，若控制器忙碌则将进程PCB挂到控制器等待队列中，不忙碌则将控制器分配给进程。</li>
<li>④根据COCT找到CHCT，若通道忙碌则将进程PCB挂到通道等待队列中，不忙碌则将通道分配给进程。</li>
</ul>
</li>
<li>注：只有设备、控制器、通道三者都分配成功时，这次设备分配才算成功，之后便可启动I/O设备进行数据传送</li>
<li>缺点<ul>
<li>①用户编程时必须使用“物理设备名”，底层细节对用户不透明，不方便编程</li>
<li>②若换了一个物理设备，则程序无法运行</li>
<li>③若进程请求的物理设备正在忙碌，则即使系统中还有同类型的设备，进程也必须阻塞等待</li>
</ul>
</li>
<li><strong>改进方法：建立逻辑设备名与物理设备名的映射机制，用户编程时只需提供逻辑设备名</strong></li>
</ul>
</li>
<li><p>设备分配的改进</p>
<ul>
<li><p>增加设备的独立性并考虑多通路情况</p>
<ul>
<li><p>增加设备的独立性</p>
<ul>
<li>进程使用逻辑设备名请求I/O。这样，系统首先从SDT中找出第一个该类设备的DCT。</li>
<li>若该设备忙，则又查找第二个该类设备的DCT。仅当所有该类设备都忙时，才把进程挂到该类设备的等待队列上</li>
<li>只要有一个该类设备可用，系统便进一步计算分配该设备的安全性。</li>
</ul>
</li>
<li><p>考虑多通路情况</p>
<ul>
<li>为防止I/O系统的“瓶颈”现象，通常采用多通路的I/O系统结构。此时对控制器和通道的分配同样要经过几次反复，<br>即若设备（控制器）所连接的第一个控制器（通道）忙时，则应查看其所连接的第二个控制器（通道）</li>
<li>仅当所有控制器（通道）都忙时，此次的控制器（通道）分配才算失败，才把进程挂到控制器（通道）的等待队列上<br>而只要有一个控制器（通道）可用，系统便可将它分配给进程。</li>
<li>设备分配过程中，先后分别访问的数据结构为SDT→DCT→COCT→CHCT。要成功分配一个设备，必须要：<br>①设备可用；②控制器可用；③通道可用。所以，“设备分配，要过三关”。</li>
</ul>
</li>
</ul>
</li>
<li><p>逻辑设备表(LUT)：<strong>建立了逻辑设备名与物理设备名之间的映射关系</strong></p>
<ul>
<li>某用户进程第一次使用设备时使用逻辑设备名向操作系统发出请求，操作系统根据用户进程指定的设备类型（逻辑设备名）查找系统设备表，找到一个空闲设备分配给进程，并在LUT中增加相应表项。</li>
<li>如果之后用户进程再次通过相同的逻辑设备名请求使用设备，则操作系统通过LUT表即可知道用户进程实际要使用的是哪个物理设备了，并且也能知道该设备的驱动程序入口地址。</li>
<li>此时不仅可以通过物理设备名查找物理设备，还可以通过逻辑设备名访问物理设备</li>
<li>此时更改物理设备后不用修改访问改设备的应用程序</li>
</ul>
</li>
<li>设备分配的步骤<ul>
<li>①根据进程请求的逻辑设备名查找SDT(注：用户编程时提供的逻辑设备名其实就是“设备类型”)</li>
<li><strong>②查找SDT，找到用户进程指定类型的、并且空闲的设备，将其分配给该进程。操作系统在逻辑设备表(LUT)中新增一个表项。</strong></li>
<li>③根据DCT找到COCT，若控制器忙碌则将进程PCB挂到控制器等待队列中，不忙碌则将控制器分配给进程。</li>
<li>④根据COCT找到CHCT，若通道忙碌则将进程PCB挂到通道等待队列中，不忙碌则将通道分配给进程。</li>
</ul>
</li>
<li>逻辑设备表的设置问题<ul>
<li>整个系统只有一张LUT：各用户所用的逻辑设备名不允许重复，适用于单用户操作系统</li>
<li>每个用户一张LUT：不同用户的逻辑设备名可重复，适用于多用户操作系统</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="3-高速缓存与缓冲区"><a href="#3-高速缓存与缓冲区" class="headerlink" title="3.高速缓存与缓冲区"></a>3.高速缓存与缓冲区</h4><ul>
<li><p>高速缓存</p>
<ul>
<li>操作系统中使用磁盘高速缓存技术来提高磁盘的I/O速度<br>利用内存中的存储空间来暂存从磁盘中读出的一系列盘块中</li>
<li><strong>磁盘高速缓存逻辑上属于磁盘，物理上则是驻留在内存中的盘块。</strong></li>
<li>高速缓存在内存中分为两种形式<ul>
<li>一种是在内存中开辟一个单独的空间作为磁盘高速缓存，大小固定</li>
<li>另一种是把未利用的内存空间作为一个缓冲池，供请求分页系统和磁盘I/O时共享。</li>
</ul>
</li>
</ul>
</li>
<li><p>缓冲区的定义</p>
<ul>
<li>缓冲区是一个存储区域，可以由专门的硬件寄存器组成，也可利用内存作为缓冲区。</li>
<li>使用硬件作为缓冲区的成本较高，容量也较小，一般仅用在对速度要求非常高的场合；<br>如存储器管理中所用的联想寄存器（快表），由于对页表的访问频率极高，因此使用速度很快的联想寄存器来存放页表项的副本</li>
<li>一般情况下，更多的是利用内存作为缓冲区，“设备独立性软件”的缓冲区管理就是要组织管理好这些缓冲区</li>
</ul>
</li>
<li>缓冲区的作用<ul>
<li>缓和CPU与I/O设备之间速度不匹配的矛盾<ul>
<li><img src="https://s1.ax1x.com/2023/08/25/pPtI6gO.png" alt="pPtI6gO.png"></li>
</ul>
</li>
<li>减少对CPU的中断频率，放宽对CPU中断响应时间的限制<ul>
<li>如果是字符型设备则每输出完一个字符就要向CPU发送一次中断信号</li>
</ul>
</li>
<li>解决数据粒度不匹配的问题<ul>
<li>输出进程每次可以生成一块数据但I/O设备每次只能输出一个字符</li>
</ul>
</li>
<li>提高CPU与I/O设备之间的并行性</li>
</ul>
</li>
<li>单缓冲<ul>
<li>操作系统会在主存中为其分配一个缓冲区，用户进程的内存空间中，会分出一片工作区来接受输入/输出数据（一般也默认工作区大小与缓冲区相同）</li>
<li>当缓冲区数据非空时，不能往缓冲区冲入数据，只能从缓冲区把数据传出；</li>
<li>当缓冲区为空时，可以往缓冲区冲入数据，但必须把缓冲区充满以后，才能从缓冲区把数据传出。</li>
<li><strong>分析问题的初始状态：工作区满；缓冲区空处理一块数据的平均耗时时间：Max(C,T)+M</strong><ul>
<li><img src="https://s1.ax1x.com/2023/08/25/pPtHKzV.png" alt="pPtHKzV.png"></li>
</ul>
</li>
</ul>
</li>
<li>双缓冲<ul>
<li><strong>分析问题的初始状态：工作区空，一个缓冲区满，另一个缓冲区空；处理一块数据平均耗时Max(T,C+M)</strong></li>
</ul>
</li>
<li>单缓冲与双缓冲的区别<ul>
<li>两台机器之间通信时，可以配置缓冲区用于数据的发送和接受。</li>
<li>若两个相互通信的机器只设置单缓冲区，在任一时刻只能实现数据的单向传输。</li>
<li>若两个相互通信的机器设置双缓冲区，则同一时刻可以实现双向的数据传输。</li>
</ul>
</li>
<li>例题<ul>
<li>例1<ul>
<li>选B<img src="https://s1.ax1x.com/2023/08/25/pPN9BOs.png" alt="pPN9BOs.png"></li>
<li><img src="https://s1.ax1x.com/2023/08/25/pPN9ckV.png" alt="pPN9ckV.png"></li>
</ul>
</li>
<li>例2<ul>
<li>选C<img src="https://s1.ax1x.com/2023/08/25/pPN9fl4.png" alt="pPN9fl4.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="三-磁盘与固态硬盘（✪）"><a href="#三-磁盘与固态硬盘（✪）" class="headerlink" title="三.磁盘与固态硬盘（✪）"></a>三.磁盘与固态硬盘（✪）</h3><h4 id="1-磁盘的结构"><a href="#1-磁盘的结构" class="headerlink" title="1.磁盘的结构"></a>1.磁盘的结构</h4><ul>
<li>磁盘、磁道、扇区的概念<ul>
<li>磁盘由表面涂有磁性物质的圆形盘片组成</li>
<li>每个盘片被划分为一个个磁道，每个磁道又划分为一个个扇区</li>
<li>每个扇区就是一个磁盘块”。各个扇区存放的数据量相同(如1KB)</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/26/pPN3pHx.png" alt="pPN3pHx.png"></li>
</ul>
</li>
</ul>
</li>
<li>如何在磁盘中读/写数据<ul>
<li>磁头移动到目标位置，盘片旋转，对应扇区划过磁道才能完成读/写（机械操作）</li>
<li>存储一个文件时，当一个磁道存储不下时，选择同一个柱面的不同盘面进行存储，此时可以避免磁臂移动，减少了处理时间</li>
</ul>
</li>
<li>盘面、柱面的概念<ul>
<li>磁盘有多个盘片“摞”起来，每个盘片有两个盘面</li>
<li>所有盘面中相对位置相同的磁道组成柱面</li>
</ul>
</li>
<li>磁盘的物理地址<ul>
<li><strong>可用(柱面号，盘面号，扇区号)来定位任意一个“磁盘块”。</strong></li>
<li>①根据“柱面号”移动磁臂，让磁头指向指定柱面</li>
<li>②激活指定盘面对应的磁头；</li>
<li>③磁盘旋转的过程中，指定的扇区会从磁头下面划过，这样就完成了对指定扇区的读/写。</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/26/pPNutDf.png" alt="pPNutDf.png"></li>
</ul>
</li>
</ul>
</li>
<li>磁盘的分类<ul>
<li>根据磁头是否可移动<ul>
<li>固定头磁盘（每个磁道有一个磁头，则一个盘面有多个磁头）</li>
<li>移动头磁盘（每个盘面只有一个磁头）</li>
</ul>
</li>
<li>根据盘片是否可更换：固定盘磁盘可换盘磁盘</li>
</ul>
</li>
<li>簇/块：操作系统限制的存储空间分配基本单位<br>簇：windows系统的说法；块：Linux、Uniⅸ系统的说法<ul>
<li>本题需为簇的整数倍，选2048B<img src="https://s1.ax1x.com/2023/08/26/pPNDsk4.png" alt="pPNDsk4.png"></li>
</ul>
</li>
</ul>
<h4 id="2-磁盘的管理"><a href="#2-磁盘的管理" class="headerlink" title="2.磁盘的管理"></a>2.磁盘的管理</h4><ul>
<li>磁盘初始化<ul>
<li>Step1：进行低级格式化（物理格式化）：将磁盘的各个磁道划分为扇区。一个扇区通常可分为头、数据区域（如512B大小）、尾三个部分组成。<ul>
<li>管理扇区所需要的各种数据结构一般存放在头、尾两个部分，包括扇区校验码，如奇偶校验、CRC循环冗余校验码等，校验码用于校验扇区中的数据是否发生错误</li>
</ul>
</li>
<li>Step2：将磁盘分区，每个分区由若干柱面组成（即分为我们熟悉的C盘、D盘、E盘）</li>
<li>Step3：进行逻辑格式化（高级格式化），创建文件系统。包括创建文件系统的根目录、初始化存储空间管理所用的数据结构（如位示图、空闲分区表）、产生引导扇区</li>
</ul>
</li>
<li>引导块<ul>
<li>计算机启动时需要运行初始化程序（自举程序）来完成初始化</li>
<li>ROM中存放很小的自举装入程序，ROM(只读存储器）中的数据在出厂时就写入了，并且以后不能再修改</li>
<li>完整的自举程序存放在初始块（引导块/启动分区）上，启动分区位于磁盘的固定位置，拥有启动分区的磁盘为系统磁盘或启动磁盘</li>
<li>开机时计算机先运行“自举装入程序”，通过执行该程序就可找到引导块，并将完整的“自举程序”读入内存，完成初始化</li>
</ul>
</li>
<li>坏块管理<ul>
<li>简单的磁盘：逻辑格式化时对整个磁盘进行坏块检查，将坏块标记出来；<br>如在FAT表上标明。（在这种方式中，坏块对操作系统不透明）</li>
<li>复杂的磁盘：磁盘控制器维护一个坏块链，在磁盘出厂前进行低级格式化（物理格式化）时就将坏块链进行初始化<br>并会保留一些“备用扇区”，用于替换坏块。这种方案称为扇区备用。且这种处理方式中，坏块对操作系统透明。</li>
</ul>
</li>
</ul>
<h4 id="3-磁盘调度算法（♚）"><a href="#3-磁盘调度算法（♚）" class="headerlink" title="3.磁盘调度算法（♚）"></a>3.磁盘调度算法（♚）</h4><ul>
<li>一次读/写操作需要的时间<ul>
<li>寻道（找）时间${\mathrm{T}_{\mathrm{S}}}$: 在读/写数据前, <strong>将磁头移动到指定磁道所花的时间</strong>。<ul>
<li>启动磁头臂是需要时间的。假设耗时为${s}$;</li>
<li><strong>移动磁头也是需要时间的。假设磁头匀速移动, 每跨越一 个磁道耗时为${m}$, 总共需要跨越${n}$条磁道。则:</strong><br><strong>寻道时间${T_{s}=s+m * n}$</strong></li>
<li>现在的硬盘移动一个磁道大约需要0.2ms,磁臂启动时间约为2ms</li>
<li>寻道时间在所有时间中，寻道时间需要移动磁臂，所占用的时间最长</li>
</ul>
</li>
<li>延迟时间${\mathrm{T}_{\mathrm{R}}}$: 通过旋转磁盘, <strong>使磁头定位到目标扇区所需要的时间</strong>。<ul>
<li><strong>设磁盘转速为${r}$(单位: 转/秒, 或转/分), 则平均所需的延迟时间${T_{R}=(1 / 2) *(1 / r)=1 / 2 r}$</strong></li>
<li>1/r就是转一圈需要的时间。找到目标扇区平均需要转半圈，因此再乘以1/2</li>
<li>硬盘的典型转速为5400转/分，或7200转/分</li>
</ul>
</li>
<li>传输时间${\mathrm{T}_{\mathrm{t}}}$: <strong>从磁盘读出或向磁盘写入数据所经历的时间</strong><ul>
<li><strong>设磁盘转速为${r}$，此次读/写的字节数为${b}$，每个磁道上的字节数为${\mathrm{N}}$。则传输时间${T_{t}=(1 / r) *(b / N)=b /(r N)}$</strong></li>
<li>每个磁道要可存N字节的数据，因此b字节的数据需要b/N个磁道才能存储。而读/写一个磁道所需的时间刚好又是转一圈所需要的时间1/r</li>
</ul>
</li>
<li>注意事项<ul>
<li><strong>寻道时间主要受磁盘调度算法的影响</strong></li>
<li><strong>延迟时间受到磁盘空闲空间分配程序以及文件的物理结构的影响</strong></li>
<li><strong>扇区数据的处理时间对旋转延迟有影响但是影响不大。</strong></li>
</ul>
</li>
</ul>
</li>
<li>磁盘调度算法（最优化传输时间）<ul>
<li>先来先服务(FCFS)<ul>
<li>根据进程请求访问磁盘的先后顺序进行调度。</li>
<li>优点：公平；如果请求访问的磁道比较集中的话，算法性能还算过的去</li>
<li>缺点：如果有大量进程竞争使用磁盘，请求访问的破道很分散，则FCFS在性能上很差，寻道时间长。</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/26/pPNQCE8.png" alt="pPNQCE8.png"></li>
</ul>
</li>
</ul>
</li>
<li>最短寻找时间优先(SSTF)<ul>
<li>SSTF算法会优先处理的磁道是与当前磁头最近的磁道。可以保证每次的寻道时间最短，但是并不能保证总的寻道时间最短。(其实就是贪心算法的思想，只是选择眼前最优，但是总体未必最优)</li>
<li>优点：性能较好，平均寻道时间短</li>
<li>缺点：<strong>可能产生“饥饿”现象</strong>，磁头有可能在一个小区域内来回来去地移动</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/26/pPNQNb6.png" alt="pPNQNb6.png"></li>
</ul>
</li>
</ul>
</li>
<li>扫描算法(SCAN)<ul>
<li>解决饥饿问题：只有磁头移动到最外侧磁道的时候才能往内移动，移动到最内侧磁道的时候才能往外移动。这就是扫描算法(SCAN)的思想。由于磁头移动的方式很像电梯，因此也叫<strong>电梯算法</strong>。（<strong>移动时，只有到了最边上的磁道才能改变磁头移动方向</strong>）</li>
<li><strong>优点：性能较好，平均寻道时间较短，不会产生饥饿现象</strong></li>
<li>缺点<ul>
<li><strong>①只有到达最边上的磁道时才能改变磁头移动方向；</strong><br><strong>事实上，处理了184号磁道的访问请求之后就不需要再往右移动磁头了。</strong></li>
<li><strong>②SCAN算法对于各个位置磁道的响应频率不平均</strong></li>
</ul>
</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/26/pPNlkdK.png" alt="pPNlkdK.png"></li>
</ul>
</li>
</ul>
</li>
<li>LOOK调度算法<ul>
<li><strong>还是要向一个边上移动，但是不用移动到底</strong>，如果在磁头移动方向上已经<strong>没有别的请求，就可以立即改变磁头移动方向</strong>。(边移动边观察，因此叫LOOK)，解决扫描算法非要移动到最边上的问题</li>
<li>优点：比起SCAN算法来，不需要每次都移动到最外侧或最内侧才改变磁头方向，使寻道时间进一步缩短</li>
<li>缺点：未解决响应不均衡的问题</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/26/pPNl2l9.png" alt="pPNl2l9.png"></li>
</ul>
</li>
</ul>
</li>
<li>C-SCAN算法<ul>
<li>规定只有磁头朝某个特定方向移动时才处理磁道访问请求，而返回时<strong>直接快速移动至起始端</strong>而不处理任何请求。<br>解决对于各个位置磁道的响应频率不平均</li>
<li>优点：比起SCAN来，对于各个位置磁道的响应频率很平均。</li>
<li>缺点：只有到达最边上的磁道时才能改变磁头移动方向，另外，比起SCAN算法来，平均寻道时间更长。</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/26/pPNl5TK.png" alt="pPNl5TK.png"></li>
</ul>
</li>
</ul>
</li>
<li>C-LOOK算法<ul>
<li>如果磁头移动的方向上已经没有磁道访问请求了，就可以立即让磁头返回，磁头只需要返回到<strong>最靠近边缘的并且需要访问的磁道上即可</strong></li>
<li>优点：比起C-SCAN算法来，不需要每次都移动到最外侧或最内侧才改变磁头方向，使寻道时间进一步缩短</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/26/pPNlbSH.png" alt="pPNlbSH.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>减少延迟时间的方法<ul>
<li>关于延迟时间的产生<ul>
<li><strong>假设要连续读取几个相邻扇区：磁头读取一块的内容后，需要一小段时间处理，而盘片又在不停地旋转</strong><br>因此，如果扇区相邻着排列，则读完1号扇区后无法连续不断地读入2号扇区，必须等盘片继续旋转，2号扇区再次划过磁头，才能完成扇区读入</li>
<li>结论：<strong>磁头读入一个扇区数据后需要一小段时间处理，如果逻辑上相邻的扇区在物理上也相邻，则读入几个连续的逻辑扇区，可能需要很长的延迟时间</strong></li>
</ul>
</li>
<li>磁盘地址结构的设计<ul>
<li>为什么？磁盘的物理地址是(柱面号，盘面号，扇区号)，而不是(盘面号，柱面号，扇区号)</li>
<li>答：读取地址连续的磁盘块时，采用（柱面号盘面号，扇区号）的地址结构可以<strong>减少磁头移动消耗的时间</strong></li>
</ul>
</li>
<li>两种方法（使<strong>读取连续的逻辑扇区</strong>所需要的延迟时间更小）<ul>
<li>交替编号：让编号相邻的扇区在物理上不相邻</li>
<li>错位命名：让相邻盘面的扇区编号“错位”</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/26/pPNJSDs.png" alt="pPNJSDs.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>例题</p>
<ul>
<li><p>例1</p>
<ul>
<li><img src="https://s1.ax1x.com/2023/08/26/pPNDMOf.png" alt="pPNDMOf.png"></li>
</ul>
</li>
<li><p>例2</p>
<ul>
<li>此时转1圈需要60/3000秒，每个扇区的时间再除以10，选C<br><img src="https://s1.ax1x.com/2023/08/26/pPNDGkQ.png" alt="pPNDGkQ.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="4-固态磁盘（SSD）"><a href="#4-固态磁盘（SSD）" class="headerlink" title="4.固态磁盘（SSD）"></a>4.固态磁盘（SSD）</h4><ul>
<li>原理：基于闪存技术Flash Memory，属于电可擦除ROM，即EEPROM</li>
<li>组成<ul>
<li>闪存翻译层：负责翻译逻辑块号，找到对应页(Page)</li>
<li>存储介质：包含多个闪存芯片(Flash Chip)，每个芯片包含多个块(block)，每个块包含多个页(page)</li>
</ul>
</li>
<li>读写性能特征<ul>
<li><strong>以页(page)为单位读/写：相当于磁盘的”扇区”</strong></li>
<li><strong>以块(bock)为单位”擦除”：擦干净的块，其中的每页都可以写一次，读无限次</strong></li>
<li>支持随机访问，系统给定一个逻辑地址，闪存翻译层可通过电路迅速定位到对应的物理地址</li>
<li><strong>读快、写慢。要写的页如果有数据，则不能写入，需要将块内其他页全部复制到一个新的（擦除过的）块中，再写入新的页</strong></li>
</ul>
</li>
<li>与机械硬盘相比的特点<ul>
<li>SSD读写速度快，<strong>随机访问性能高</strong>，用电路控制访问位置；<br>机械硬盘通过移动磁臂旋转磁盘控制访问位置，有寻道时间和旋转延迟</li>
<li>SSD安静无噪音、耐摔抗震、能耗低、造价更贵</li>
<li><strong>SSD的一个”块”被擦除次数过多（重复写同一个块）可能会坏掉，而机械硬盘的扇区不会因为写的次数太多而坏掉</strong></li>
</ul>
</li>
<li>磨损均衡技术<ul>
<li>思想：将“擦除”平均分布在各个块上，以提升使用寿命</li>
<li>动态磨损均衡：写入数据时，优先选择累计擦除次数少的新闪存块</li>
<li>静态磨损均衡：SSD监测并自动进行数据分配、迁移，让老旧的闪存块承担以读为主的储存任务，让较新的闪存块承担更多的写任务（<strong>更优秀</strong>）</li>
</ul>
</li>
<li>图片<ul>
<li><img src="https://s1.ax1x.com/2023/08/26/pPNM9fJ.png" alt="pPNM9fJ.png"></li>
</ul>
</li>
</ul>

      
    </div>
    
    
    



    

    

    

    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>-------------</div>
    
</div>

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag"><i class="fa fa-tag"></i> 操作系统</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2024/08/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/" rel="next" title="操作系统第四章-文件管理">
                <i class="fa fa-chevron-left"></i> 操作系统第四章-文件管理
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>

  </div>
  
  
  
  </article>
  



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">
      
      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/header.gif"
                alt="沙漠客" />
            
              <p class="site-author-name" itemprop="name">沙漠客</p>
              <p class="site-description motion-element" itemprop="description">Action speak louder than words!</p>
          </div>
        <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=100 src="//music.163.com/outchain/player?type=2&id=1396311816&auto=1&height=66"></iframe>
        </iframe>
          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/">
              
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/sichuanshamoke" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://blog.csdn.net/m0_51960673?spm=1000.2115.3001.5343" target="_blank" title="CSDN">
                      
                        <i class="fa fa-fw fa-fa fa-codiepie"></i>CSDN</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.kaggle.com/sichuanshamoke" target="_blank" title="kaggle">
                      
                        <i class="fa fa-fw fa-stack-overflow"></i>kaggle</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://leetcode.cn/u/amazing-snyderdc5/" target="_blank" title="LeetCode">
                      
                        <i class="fa fa-fw fa-skype"></i>LeetCode</a>
                  </span>
                
            </div>
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <!-- modify icon to fire by szw -->
                <i class="fa fa-history fa-" aria-hidden="true"></i>
                近期文章
              </div>
              <ul class="links-of-blogroll-list">
                
                
                  <li class="recent_posts_li">
                    <a href="/2024/08/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BE%93%E5%85%A5-%E8%BE%93%E5%87%BA-I-O-%E7%AE%A1%E7%90%86/" title="操作系统第五章-输入/输出(I/O)管理" target="_blank">操作系统第五章-输入/输出(I/O)管理</a>
                  </li>
                
                  <li class="recent_posts_li">
                    <a href="/2024/08/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/" title="操作系统第四章-文件管理" target="_blank">操作系统第四章-文件管理</a>
                  </li>
                
                  <li class="recent_posts_li">
                    <a href="/2024/08/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC%E4%B8%89%E7%AB%A0-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" title="操作系统第三章-内存管理" target="_blank">操作系统第三章-内存管理</a>
                  </li>
                
                  <li class="recent_posts_li">
                    <a href="/2024/08/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/" title="操作系统第二章-进程与线程" target="_blank">操作系统第二章-进程与线程</a>
                  </li>
                
                  <li class="recent_posts_li">
                    <a href="/2024/08/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC%E4%B8%80%E7%AB%A0-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/" title="操作系统第一章-计算机系统概述" target="_blank">操作系统第一章-计算机系统概述</a>
                  </li>
                
              </ul>
            </div>
          


          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                友情链接
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://space.bilibili.com/562700874?spm_id_from=333.1365.0.0" title="风翼飞镰" target="_blank">风翼飞镰</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://space.bilibili.com/383551518/?spm_id_from=333.999.0.0" title="水论文的程序猿" target="_blank">水论文的程序猿</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BE%93%E5%85%A5-%E8%BE%93%E5%87%BA%EF%BC%88I-O%EF%BC%89%E7%AE%A1%E7%90%86"><span class="nav-text">操作系统第五章 输入&#x2F;输出（I&#x2F;O）管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80-I-O%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0%EF%BC%88%E2%9C%A0%EF%BC%89"><span class="nav-text">一.I&#x2F;O管理概述（✠）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-I-O%E8%AE%BE%E5%A4%87"><span class="nav-text">1.I&#x2F;O设备</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-I-O%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F"><span class="nav-text">2.I&#x2F;O控制方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-I-O%E8%BD%AF%E4%BB%B6%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="nav-text">3.I&#x2F;O软件层次结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8FI-O%E6%8E%A5%E5%8F%A3"><span class="nav-text">4.应用程序I&#x2F;O接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-%E6%8F%90%E9%AB%98%E7%A3%81%E7%9B%98I-O%E9%80%9F%E5%BA%A6%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-text">5.提高磁盘I&#x2F;O速度的方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8C-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6%EF%BC%88%E2%9C%A0%EF%BC%89"><span class="nav-text">二.设备独立性软件（✠）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%81%87%E8%84%B1%E6%9C%BA%EF%BC%88SPOOLing%EF%BC%89%E6%8A%80%E6%9C%AF"><span class="nav-text">1.假脱机（SPOOLing）技术</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E8%AE%BE%E5%A4%87%E7%9A%84%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6"><span class="nav-text">2.设备的分配与回收</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E4%B8%8E%E7%BC%93%E5%86%B2%E5%8C%BA"><span class="nav-text">3.高速缓存与缓冲区</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89-%E7%A3%81%E7%9B%98%E4%B8%8E%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98%EF%BC%88%E2%9C%AA%EF%BC%89"><span class="nav-text">三.磁盘与固态硬盘（✪）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E7%A3%81%E7%9B%98%E7%9A%84%E7%BB%93%E6%9E%84"><span class="nav-text">1.磁盘的结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E7%A3%81%E7%9B%98%E7%9A%84%E7%AE%A1%E7%90%86"><span class="nav-text">2.磁盘的管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E7%A3%81%E7%9B%98%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95%EF%BC%88%E2%99%9A%EF%BC%89"><span class="nav-text">3.磁盘调度算法（♚）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E5%9B%BA%E6%80%81%E7%A3%81%E7%9B%98%EF%BC%88SSD%EF%BC%89"><span class="nav-text">4.固态磁盘（SSD）</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2023 &mdash; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Shamoke</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">172.1k</span>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: true,
        appId: 'wsUYJtlLslOYlG6pA3pS9i30-gzGzoHsz',
        appKey: 'd1H2YDHxgJkfTsFw0UhNNMFJ',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

    <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }
 
    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }
 
    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }
 
    .highlight-wrap {
      position: relative;
    }
  </style>
 
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
 
        if(result)$(this).text('复制成功')
        else $(this).text('复制失败')
 
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('复制')
        }, 300)
      }).append(e)
    })
  </script>	
  
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
